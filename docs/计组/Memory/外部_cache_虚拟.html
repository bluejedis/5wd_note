<!DOCTYPE html>
<html>

<head>
  <title>外部_cache_虚拟</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet"
    href="file:///c:\Users\13550\.vscode\extensions\shd101wyy.markdown-preview-enhanced-0.8.15\crossnote\dependencies\katex\katex.min.css">





  <style>
    pre {
      font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;
      direction: ltr;
      text-align: left;
      white-space: pre;
      word-spacing: normal;
      word-break: normal;
      padding: 1em;
      margin: .5em 0;
      overflow: auto;
      line-height: 1.5;
      tab-size: 4;
      hyphens: none;
      color: #555;
      background-color: #f0f0f0 !important;
      border: #d6d6d6;
      border-radius: 3px
    }

    pre[class*=language-] {
      padding: 1em
    }

    code[class*=language-] .token.cdata,
    code[class*=language-] .token.comment,
    code[class*=language-] .token.doctype,
    code[class*=language-] .token.prolog,
    pre[class*=language-] .token.cdata,
    pre[class*=language-] .token.comment,
    pre[class*=language-] .token.doctype,
    pre[class*=language-] .token.prolog {
      color: #998;
      font-style: italic
    }

    code[class*=language-] .token.punctuation,
    pre[class*=language-] .token.punctuation {
      color: #920b2d
    }

    code[class*=language-] .namespace,
    pre[class*=language-] .namespace {
      opacity: .7
    }

    code[class*=language-] .token.property,
    pre[class*=language-] .token.property {
      font-weight: 700;
      color: #333
    }

    code[class*=language-] .token.boolean,
    code[class*=language-] .token.function-name,
    code[class*=language-] .token.number,
    pre[class*=language-] .token.boolean,
    pre[class*=language-] .token.function-name,
    pre[class*=language-] .token.number {
      color: #d14
    }

    code[class*=language-] .token.tag,
    pre[class*=language-] .token.tag {
      color: #d14
    }

    code[class*=language-] .token.symbol,
    pre[class*=language-] .token.symbol {
      color: #990073
    }

    code[class*=language-] .token.selector,
    pre[class*=language-] .token.selector {
      color: teal
    }

    code[class*=language-] .token.attr-name,
    pre[class*=language-] .token.attr-name {
      color: #458;
      font-weight: 700
    }

    code[class*=language-] .token.string,
    pre[class*=language-] .token.string {
      color: #d14
    }

    code[class*=language-] .token.char,
    pre[class*=language-] .token.char {
      color: #606aa1
    }

    code[class*=language-] .token.url,
    pre[class*=language-] .token.url {
      color: #888
    }

    code[class*=language-] .token.atrule,
    code[class*=language-] .token.attr-value,
    code[class*=language-] .token.keyword,
    pre[class*=language-] .token.atrule,
    pre[class*=language-] .token.attr-value,
    pre[class*=language-] .token.keyword {
      color: #222;
      font-weight: 700
    }

    code[class*=language-] .token.function,
    pre[class*=language-] .token.function {
      color: #900
    }

    code[class*=language-] .token.class-name,
    pre[class*=language-] .token.class-name {
      text-decoration: underline;
      color: #606aa1
    }

    code[class*=language-] .token.variable,
    pre[class*=language-] .token.variable {
      color: teal
    }

    code[class*=language-] .token.bold,
    code[class*=language-] .token.important,
    pre[class*=language-] .token.bold,
    pre[class*=language-] .token.important {
      font-weight: 700
    }

    code[class*=language-] .token.italic,
    pre[class*=language-] .token.italic {
      font-style: italic
    }

    code[class*=language-] .token.entity,
    pre[class*=language-] .token.entity {
      cursor: help
    }

    pre[data-line] {
      position: relative;
      padding: 1em 0 1em 3em
    }

    pre[data-line] .line-highlight-wrapper {
      position: absolute;
      top: 0;
      left: 0;
      background-color: transparent;
      display: block;
      width: 100%
    }

    pre[data-line] .line-highlight {
      position: absolute;
      left: 0;
      right: 0;
      padding: inherit 0;
      margin-top: 1em;
      background: hsla(24, 20%, 50%, .08);
      background: linear-gradient(to right, hsla(24, 20%, 50%, .1) 70%, hsla(24, 20%, 50%, 0));
      pointer-events: none;
      line-height: inherit;
      white-space: pre
    }

    pre[data-line] .line-highlight:before,
    pre[data-line] .line-highlight[data-end]:after {
      content: attr(data-start);
      position: absolute;
      top: .4em;
      left: .6em;
      min-width: 1em;
      padding: 0 .5em;
      background-color: hsla(24, 20%, 50%, .4);
      color: #f4f1ef;
      font: bold 65%/1.5 sans-serif;
      text-align: center;
      vertical-align: .3em;
      border-radius: 999px;
      text-shadow: none;
      box-shadow: 0 1px #fff
    }

    pre[data-line] .line-highlight[data-end]:after {
      content: attr(data-end);
      top: auto;
      bottom: .4em
    }

    html body {
      font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif;
      font-size: 16px;
      line-height: 1.6;
      color: #555;
      background-color: #fff;
      overflow: initial;
      box-sizing: border-box;
      word-wrap: break-word
    }

    html body>:first-child {
      margin-top: 0
    }

    html body h1,
    html body h2,
    html body h3,
    html body h4,
    html body h5,
    html body h6 {
      line-height: 1.2;
      margin-top: 1em;
      margin-bottom: 16px;
      color: #030303
    }

    html body h1 {
      font-size: 2.25em;
      font-weight: 300;
      padding-bottom: .3em
    }

    html body h2 {
      font-size: 1.75em;
      font-weight: 400;
      padding-bottom: .3em
    }

    html body h3 {
      font-size: 1.5em;
      font-weight: 500
    }

    html body h4 {
      font-size: 1.25em;
      font-weight: 600
    }

    html body h5 {
      font-size: 1.1em;
      font-weight: 600
    }

    html body h6 {
      font-size: 1em;
      font-weight: 600
    }

    html body h1,
    html body h2,
    html body h3,
    html body h4,
    html body h5 {
      font-weight: 600
    }

    html body h5 {
      font-size: 1em
    }

    html body h6 {
      color: #7e7e7e
    }

    html body strong {
      color: #030303
    }

    html body del {
      color: #7e7e7e
    }

    html body a:not([href]) {
      color: inherit;
      text-decoration: none
    }

    html body a {
      color: #08c;
      text-decoration: none
    }

    html body a:hover {
      color: #00a3f5;
      text-decoration: none
    }

    html body img {
      max-width: 100%
    }

    html body>p {
      margin-top: 0;
      margin-bottom: 16px;
      word-wrap: break-word
    }

    html body>ol,
    html body>ul {
      margin-bottom: 16px
    }

    html body ol,
    html body ul {
      padding-left: 2em
    }

    html body ol.no-list,
    html body ul.no-list {
      padding: 0;
      list-style-type: none
    }

    html body ol ol,
    html body ol ul,
    html body ul ol,
    html body ul ul {
      margin-top: 0;
      margin-bottom: 0
    }

    html body li {
      margin-bottom: 0
    }

    html body li.task-list-item {
      list-style: none
    }

    html body li>p {
      margin-top: 0;
      margin-bottom: 0
    }

    html body .task-list-item-checkbox {
      margin: 0 .2em .25em -1.8em;
      vertical-align: middle
    }

    html body .task-list-item-checkbox:hover {
      cursor: pointer
    }

    html body blockquote {
      margin: 16px 0;
      font-size: inherit;
      padding: 0 15px;
      color: #7e7e7e;
      background-color: #f0f0f0;
      border-left: 4px solid #d6d6d6
    }

    html body blockquote>:first-child {
      margin-top: 0
    }

    html body blockquote>:last-child {
      margin-bottom: 0
    }

    html body hr {
      height: 4px;
      margin: 32px 0;
      background-color: #d6d6d6;
      border: 0 none
    }

    html body table {
      margin: 10px 0 15px 0;
      border-collapse: collapse;
      border-spacing: 0;
      display: block;
      width: 100%;
      overflow: auto;
      word-break: normal;
      word-break: keep-all
    }

    html body table th {
      font-weight: 700;
      color: #030303
    }

    html body table td,
    html body table th {
      border: 1px solid #d6d6d6;
      padding: 6px 13px
    }

    html body dl {
      padding: 0
    }

    html body dl dt {
      padding: 0;
      margin-top: 16px;
      font-size: 1em;
      font-style: italic;
      font-weight: 700
    }

    html body dl dd {
      padding: 0 16px;
      margin-bottom: 16px
    }

    html body code {
      font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;
      font-size: .85em;
      color: #030303;
      background-color: #f0f0f0;
      border-radius: 3px;
      padding: .2em 0
    }

    html body code::after,
    html body code::before {
      letter-spacing: -.2em;
      content: '\00a0'
    }

    html body pre>code {
      padding: 0;
      margin: 0;
      word-break: normal;
      white-space: pre;
      background: 0 0;
      border: 0
    }

    html body .highlight {
      margin-bottom: 16px
    }

    html body .highlight pre,
    html body pre {
      padding: 1em;
      overflow: auto;
      line-height: 1.45;
      border: #d6d6d6;
      border-radius: 3px
    }

    html body .highlight pre {
      margin-bottom: 0;
      word-break: normal
    }

    html body pre code,
    html body pre tt {
      display: inline;
      max-width: initial;
      padding: 0;
      margin: 0;
      overflow: initial;
      line-height: inherit;
      word-wrap: normal;
      background-color: transparent;
      border: 0
    }

    html body pre code:after,
    html body pre code:before,
    html body pre tt:after,
    html body pre tt:before {
      content: normal
    }

    html body blockquote,
    html body dl,
    html body ol,
    html body p,
    html body pre,
    html body ul {
      margin-top: 0;
      margin-bottom: 16px
    }

    html body kbd {
      color: #030303;
      border: 1px solid #d6d6d6;
      border-bottom: 2px solid #c7c7c7;
      padding: 2px 4px;
      background-color: #f0f0f0;
      border-radius: 3px
    }

    @media print {
      html body {
        background-color: #fff
      }

      html body h1,
      html body h2,
      html body h3,
      html body h4,
      html body h5,
      html body h6 {
        color: #030303;
        page-break-after: avoid
      }

      html body blockquote {
        color: #7e7e7e
      }

      html body pre {
        page-break-inside: avoid
      }

      html body table {
        display: table
      }

      html body img {
        display: block;
        max-width: 100%;
        max-height: 100%
      }

      html body code,
      html body pre {
        word-wrap: break-word;
        white-space: pre
      }
    }

    .markdown-preview {
      width: 100%;
      height: 100%;
      box-sizing: border-box
    }

    .markdown-preview ul {
      list-style: disc
    }

    .markdown-preview ul ul {
      list-style: circle
    }

    .markdown-preview ul ul ul {
      list-style: square
    }

    .markdown-preview ol {
      list-style: decimal
    }

    .markdown-preview ol ol,
    .markdown-preview ul ol {
      list-style-type: lower-roman
    }

    .markdown-preview ol ol ol,
    .markdown-preview ol ul ol,
    .markdown-preview ul ol ol,
    .markdown-preview ul ul ol {
      list-style-type: lower-alpha
    }

    .markdown-preview .newpage,
    .markdown-preview .pagebreak {
      page-break-before: always
    }

    .markdown-preview pre.line-numbers {
      position: relative;
      padding-left: 3.8em;
      counter-reset: linenumber
    }

    .markdown-preview pre.line-numbers>code {
      position: relative
    }

    .markdown-preview pre.line-numbers .line-numbers-rows {
      position: absolute;
      pointer-events: none;
      top: 1em;
      font-size: 100%;
      left: 0;
      width: 3em;
      letter-spacing: -1px;
      border-right: 1px solid #999;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none
    }

    .markdown-preview pre.line-numbers .line-numbers-rows>span {
      pointer-events: none;
      display: block;
      counter-increment: linenumber
    }

    .markdown-preview pre.line-numbers .line-numbers-rows>span:before {
      content: counter(linenumber);
      color: #999;
      display: block;
      padding-right: .8em;
      text-align: right
    }

    .markdown-preview .mathjax-exps .MathJax_Display {
      text-align: center !important
    }

    .markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group {
      display: none
    }

    .markdown-preview:not([data-for=preview]) .code-chunk .status {
      display: none
    }

    .markdown-preview:not([data-for=preview]) .code-chunk .output-div {
      margin-bottom: 16px
    }

    .markdown-preview .md-toc {
      padding: 0
    }

    .markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link {
      display: inline;
      padding: .25rem 0
    }

    .markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,
    .markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p {
      display: inline
    }

    .markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link {
      font-weight: 800
    }

    .scrollbar-style::-webkit-scrollbar {
      width: 8px
    }

    .scrollbar-style::-webkit-scrollbar-track {
      border-radius: 10px;
      background-color: transparent
    }

    .scrollbar-style::-webkit-scrollbar-thumb {
      border-radius: 5px;
      background-color: rgba(150, 150, 150, .66);
      border: 4px solid rgba(150, 150, 150, .66);
      background-clip: content-box
    }

    html body[for=html-export]:not([data-presentation-mode]) {
      position: relative;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      margin: 0;
      padding: 0;
      overflow: auto
    }

    html body[for=html-export]:not([data-presentation-mode]) .markdown-preview {
      position: relative;
      top: 0;
      min-height: 100vh
    }

    @media screen and (min-width:914px) {
      html body[for=html-export]:not([data-presentation-mode]) .markdown-preview {
        padding: 2em calc(50% - 457px + 2em)
      }
    }

    @media screen and (max-width:914px) {
      html body[for=html-export]:not([data-presentation-mode]) .markdown-preview {
        padding: 2em
      }
    }

    @media screen and (max-width:450px) {
      html body[for=html-export]:not([data-presentation-mode]) .markdown-preview {
        font-size: 14px !important;
        padding: 1em
      }
    }

    @media print {
      html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn {
        display: none
      }
    }

    html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn {
      position: fixed;
      bottom: 8px;
      left: 8px;
      font-size: 28px;
      cursor: pointer;
      color: inherit;
      z-index: 99;
      width: 32px;
      text-align: center;
      opacity: .4
    }

    html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn {
      opacity: 1
    }
    /*
sidebar toc
*/
    html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc {
      position: fixed;
      top: 0;
      right: 0;
      left: auto;
      width: 300px;
      height: 100%;
      padding: 32px 0 48px 0;
      font-size: 14px;
      box-shadow: 0 0 4px rgba(150, 150, 150, .33);
      box-sizing: border-box;
      overflow: auto;
      background-color: inherit
    }

    html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar {
      width: 8px
    }

    html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track {
      border-radius: 10px;
      background-color: transparent
    }

    html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb {
      border-radius: 5px;
      background-color: rgba(150, 150, 150, .66);
      border: 4px solid rgba(150, 150, 150, .66);
      background-clip: content-box
    }

    html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a {
      text-decoration: none
    }

    html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc {
      padding: 0 16px
    }

    html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link {
      display: inline;
      padding: .25rem 0
    }

    html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,
    html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p {
      display: inline
    }

    html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link {
      font-weight: 800
    }
/*toc对应更改*/
    html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview {
      right: 300px;
      left: 0;
      width: calc(100% - 300px);
      padding: 2em 2em 2em 0;
     /* padding: 2em calc(50% - 457px - 300px / 2);*/
      margin: 0;
      box-sizing: border-box
    }


    @media screen and (max-width:1274px) {
      html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview {
        padding: 2em
      }
    }

    @media screen and (max-width:450px) {
      html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview {
        width: 100%
      }
    }

    html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview {
      left: 50%;
      transform: translateX(-50%)
    }

    html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc {
      display: none
    }

    /* Please visit the URL below for more information: */
    /*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
    .markdown-preview.markdown-preview {
      /*below is newsprint_mixed_solar.css */
      /* don't work*/
    }
  </style>
  <!-- The content below will be included at the end of the <head> element. -->
  <script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function () {
      // your code here
    });
  </script>
</head>

<body for="html-export">


  <div class="crossnote markdown-preview  ">

    <span style="color: silver;">
      <h1 id="span-stylecolor-gray外spanspan-stylecolor-silver部m"><span style="color: gray;">外</span><span
          style="color: silver;">部M </span></h1>
      <ul>
        <h2 id="span-stylecolor-lightskyblue磁盘span-span-stylecolor-silverm"><span style="color: LightSkyBlue;">磁盘</span>
          <span style="color: silver;">M </span></h2>
        <p>磁盘存储器是以磁盘为存储介质的存储器，其主要优点：</p>
        <ul>
          <li>存储容量大，位价格低</li>
          <li>记录介质可重复使用</li>
          <li>记录信息可长期保存而不丢失，甚至可脱机存档</li>
          <li>非破坏性读出，读出时不需要再生</li>
        </ul>
        <p>缺点：</p>
        <ul>
          <li>存取速度慢</li>
          <li>机械结构复杂</li>
          <li>对工作环境要求较高</li>
        </ul>
        <blockquote>
          <p>pro：磁盘存储器的相关概念（2019）</p>
        </blockquote>
        <h3 id="span-stylecolor-goldenrod组成"><span style="color: Goldenrod;">组成 </span></h3>
        <ul>
          <h4 id="span-stylecolor-silver组件"><span style="color: silver;">组件 </span></h4>
          <ul>
            <li>磁盘存储器由以下组成：
              <ul>
                <li>磁盘 <span style="color: GreenYellow;">驱动</span>器</li>
                <li>磁盘 <span style="color: Gold;">控制</span>器</li>
                <li><span style="color: gray;">盘片</span></li>
              </ul>
            </li>
          </ul>
          <h4 id="span-stylecolor-silver磁盘span-stylecolor-greenyellow驱动span器"><span style="color: silver;">磁盘<span
                style="color: GreenYellow;">驱动</span>器 </span></h4>
          <ul>
            <li>驱动磁盘转动并在盘面上通过磁头进行读/写操作的装置，如图3.14所示</li>
          </ul>
          <p><img
              src="https://cdn-mineru.openxlab.org.cn/model-mineru/prod/949e3320f633db83d48f7dfbb5d87ac3e37d71935bede8ce35981b7926da2bb7.jpg"
              alt=""><br>
            图3.14磁盘 <span style="color: GreenYellow;">驱动</span> 器示意图</p>
          <h4 id="span-stylecolor-silver磁盘span-stylecolor-gold控制span器"><span style="color: silver;">磁盘<span
                style="color: Gold;">控制</span>器 </span></h4>
          <ul>
            <li>磁盘驱动器与主机的 <span style="color: GreenYellow;">接口</span></li>
            <li>主要功能：
              <ul>
                <li>接收并解释CPU发来的命令</li>
                <li>向磁盘驱动器发出各种控制信号</li>
                <li>负责检测磁盘驱动器的状态</li>
              </ul>
            </li>
          </ul>
          <h4 id="span-stylecolor-gold存储span-span-stylecolor-silver区域"><span style="color: Gold;">存储</span> <span
              style="color: silver;">区域 </span></h4>
          <ul>
            <li>组成结构：
              <ul>
                <li>多个记录面</li>
                <li>每个记录面划分为若干圆形磁道</li>
                <li>每条磁道划分为若干扇区</li>
              </ul>
            </li>
            <li>存取特点：
              <ul>
                <li>扇区（也称块）是磁盘读/写的最小单位</li>
                <li>磁盘按块存取</li>
              </ul>
            </li>
          </ul>
          <h4 id="span-stylecolor-limegreen参数"><span style="color: LimeGreen;">参数 </span></h4>
          <ul>
            <li>磁<span style="color: gray;">头</span>数（Heads）：
              <ul>
                <li>即记录面数</li>
                <li>表示磁盘共有多少个磁头</li>
                <li>用于读取/写入盘片上记录面的信息</li>
                <li>一个记录面对应一个磁头</li>
              </ul>
            </li>
            <li>柱<span style="color: gray;">面</span>数（Cylinders）：
              <ul>
                <li>表示磁盘每面盘片上有多少条磁道</li>
                <li>不同记录面的相同编号（位置）的诸磁道构成一个圆柱面</li>
              </ul>
            </li>
            <li><span style="color: LightSkyBlue;">扇</span>区数（Sectors）：
              <ul>
                <li>表示每条磁道上有多少个扇区</li>
              </ul>
            </li>
          </ul>
          <h4 id="span-stylecolor-lightskyblue物理span-span-stylecolor-gold特性"><span
              style="color: LightSkyBlue;">物理</span> <span style="color: Gold;">特性 </span></h4>
          <ul>
            <li>磁道<span style="color: gray;">间隔</span>：
              <ul>
                <li>相邻磁道及相邻扇区间通过间隙分隔</li>
                <li>目的是避免精度错误</li>
              </ul>
            </li>
            <li>位密度特点：
              <ul>
                <li>从最外道向里道增加</li>
                <li>磁盘存储能力受限于最内道的最大记录密度</li>
              </ul>
            </li>
          </ul>
          <h4 id="span-stylecolor-silver磁盘-span-stylecolor-gold高速span缓存"><span style="color: silver;">磁盘 <span
                style="color: Gold;">高速</span>缓存 </span></h4>
          <ul>
            <li>实现方式：
              <ul>
                <li>在 <span style="color: Gold;">内存</span>中开辟一部分区域</li>
                <li>缓冲 将要被送到磁盘上的<span style="color: LightSkyBlue;">数据</span></li>
              </ul>
            </li>
            <li>优点：
              <ul>
                <li>写磁盘时按" <span style="color: GreenYellow;">簇</span>"进行，避免频繁小块数据写盘</li>
                <li>中间结果数据在写回磁盘前可快速再次使用</li>
              </ul>
            </li>
          </ul>
        </ul>
        <h3 id="span-stylecolor-gold原理"><span style="color: Gold;">原理 </span></h3>
        <ul>
          <h4 id="span-stylecolor-silverspan-stylecolor-lightskyblue编码span方法"><span style="color: silver;"><span
                style="color: LightSkyBlue;">编码</span>方法 </span></h4>
          <ul>
            <li>按特定方案将二进制信息转换为磁化翻转状态序列</li>
            <li>要求读/写控制电路容易、可靠地实现转换</li>
          </ul>
          <h4 id="span-stylecolor-silver磁span-stylecolor-limegreen记录span方式"><span style="color: silver;">磁<span
                style="color: LimeGreen;">记录</span>方式 </span></h4>
          <ul>
            <li>通常采用：
              <ul>
                <li>调频制（FM）</li>
                <li>改进型调频制（MFM）</li>
              </ul>
            </li>
          </ul>
        </ul>
        <h3 id="span-stylecolor-gold性能spanspan-stylecolor-limegreen指标"><span style="color: Gold;">性能</span><span
            style="color: LimeGreen;">指标 </span></h3>
        <ul>
          <h4 id="span-stylecolor-silver记录span-stylecolor-gray密度"><span style="color: silver;">记录<span
                style="color: gray;">密度 </span></span></h4>
          <ul>
            <li>定义：盘片单位面积上记录的二进制信息量</li>
            <li>表示方式：
              <ul>
                <li>道密度：沿磁盘半径方向单位长度上的磁道数</li>
                <li>位密度：磁道单位长度上能记录的二进制代码位数</li>
                <li>面密度：位密度和道密度的乘积</li>
              </ul>
            </li>
          </ul>
          <h4 id="span-stylecolor-silver磁盘-span-stylecolor-limegreen容量"><span style="color: silver;">磁盘 <span
                style="color: LimeGreen;">容量 </span></span></h4>
          <ul>
            <li>非格式化容量：
              <ul>
                <li>定义：磁记录表面可利用的磁化单元总数</li>
                <li>计算：记录面数 × 柱面数 × 每条磁道的磁化单元数</li>
              </ul>
            </li>
            <li>格式化容量：
              <ul>
                <li>定义：按特定记录格式所能存储信息的总量</li>
                <li>计算：记录面数 × 柱面数 × 每道扇区数 × 每个扇区的容量</li>
                <li>特点：比非格式化容量小</li>
              </ul>
            </li>
          </ul>
          <blockquote>
            <p>pro：磁盘存取时间的计算（2013、2015、2022）</p>
          </blockquote>
          <h4 id="span-stylecolor-silver存取span-stylecolor-gray时间"><span style="color: silver;">存取<span
                style="color: gray;">时间 </span></span></h4>
          <ul>
            <li>组成部分：
              <ul>
                <li>寻道时间：磁头移动到目的磁道的时间</li>
                <li>旋转延迟时间：磁头定位到要读/写扇区的时间</li>
                <li>传输时间：传输数据所花费的时间</li>
              </ul>
            </li>
            <li>时间计算：
              <ul>
                <li>平均寻道时间：从最外道移动到最内道时间的一半</li>
                <li>平均旋转延迟时间：旋转半周的时间</li>
              </ul>
            </li>
          </ul>
          <h4 id="span-stylecolor-silverspan-stylecolor-lightskyblue数据span传输span-stylecolor-royalblue速率"><span
              style="color: silver;"><span style="color: LightSkyBlue;">数据</span>传输<span style="color: RoyalBlue;">速率
              </span></span></h4>
          <ul>
            <li>定义：单位时间内向主机传送数据的字节数</li>
            <li>计算公式：Dr = rN
              <ul>
                <li>r：磁盘转数（转/秒）</li>
                <li>N：每条磁道容量（字节）</li>
              </ul>
            </li>
          </ul>
        </ul>
        <h3 id="span-stylecolor-silver磁盘span-stylecolor-darkred地址"><span style="color: silver;">磁盘<span
              style="color: DarkRed;">地址 </span></span></h3>
        <blockquote>
          <p>pro：磁盘地址结构的计算（2022）</p>
        </blockquote>
        <ul>
          <h4 id="span-stylecolor-silver地址-span-stylecolor-limegreen结构"><span style="color: silver;">地址 <span
                style="color: LimeGreen;">结构 </span></span></h4>
          <ul>
            <li>主机向磁盘控制器发送寻址信息</li>
            <li>基本地址结构如图所示</li>
          </ul>
          <p><img
              src="https://cdn-mineru.openxlab.org.cn/model-mineru/prod/63c7621ebd786e99322bc2b3b8f2b7a6108c715c1896f3fefe6388625f9c5d47.jpg"
              alt=""></p>
          <h4 id="span-stylecolor-silvereg"><span style="color: silver;">eg </span></h4>
          <ul>
            <li>条件：
              <ul>
                <li>16个盘面</li>
                <li>每个盘面256个磁道</li>
                <li>每个磁道16个扇区</li>
              </ul>
            </li>
            <li>结果：
              <ul>
                <li>每个扇区地址需16位二进制代码</li>
                <li>格式如图所示</li>
              </ul>
            </li>
          </ul>
          <p><img
              src="https://cdn-mineru.openxlab.org.cn/model-mineru/prod/a05c8eee3f46040951717583967f67c0aa6f299dd9fed653a49b666bc3e3b2b4.jpg"
              alt=""></p>
        </ul>
        <h3 id="span-stylecolor-silver工作-span-stylecolor-gold过程"><span style="color: silver;">工作 <span
              style="color: Gold;">过程 </span></span></h3>
        <ul>
          <ul>
            <li>主要操作类型：
              <ul>
                <li>寻址</li>
                <li>读盘</li>
                <li>写盘</li>
              </ul>
            </li>
            <li>操作特点：
              <ul>
                <li>每个操作对应一个控制字</li>
                <li>工作步骤：
                  <ol>
                    <li>取控制字</li>
                    <li>执行控制字</li>
                  </ol>
                </li>
              </ul>
            </li>
          </ul>
          <h4 id="span-stylecolor-silverlimit"><span style="color: silver;">limit </span></h4>
          <ul>
            <li><span style="color: gray;">机械</span>式部件</li>
            <li>读/写操作是 <span style="color: Gold;">串</span>行的：
              <ul>
                <li>不能同时读写</li>
                <li>~两组数据</li>
              </ul>
            </li>
          </ul>
        </ul>
        <h3
          id="span-stylecolor-silver磁盘span-stylecolor-royalblue阵列span-span-stylecolor-silver--span-stylecolor-greenyellowrspanspan-stylecolor-royalblueaspanspan-stylecolor-grayispand">
          <span style="color: silver;">磁盘<span style="color: RoyalBlue;">阵列</span> <span style="color: silver;">( <span
                style="color: GreenYellow;">R</span><span style="color: RoyalBlue;">A</span><span
                style="color: gray;">I</span>D </span></span></h3>
        <ul>
          独立冗余磁盘阵列
          <h4 id="span-stylecolor-gold特点span-span-stylecolor-silver"><span style="color: Gold;">特点</span> <span
              style="color: silver;">: </span></h4>
          <ul>
            <li>组成特点：
              <ul>
                <li>将多个独立的物理磁盘组成一个独立的逻辑盘</li>
              </ul>
            </li>
            <li>存储特点：
              <ul>
                <li>数据分布：
                  <ul>
                    <li>在多个物理盘上分割存储</li>
                    <li>交叉存储方式</li>
                  </ul>
                </li>
                <li>访问方式：
                  <ul>
                    <li>支持并行访问</li>
                  </ul>
                </li>
              </ul>
            </li>
            <li>性能优势：
              <ul>
                <li>更好的存储性能</li>
                <li>更高的可靠性</li>
                <li>更强的安全性</li>
              </ul>
            </li>
          </ul>
          <blockquote>
            <p>pro：提高RAID可靠性的措施（2013）</p>
          </blockquote>
          <h4 id="span-stylecolor-gold分级"><span style="color: Gold;">分级 </span></h4>
          <ul>
            <li>RAID1～RAID5的共同特点：
              <ul>
                <li>磁盘损坏时可随时更换</li>
                <li>数据不会损坏</li>
                <li>提升系统可靠性</li>
              </ul>
            </li>
          </ul>
          <ul>
            <h5 id="span-stylecolor-greenyellow类型"><span style="color: GreenYellow;">类型 </span></h5>
            <ul>
              <li>RAID0：<span style="color: gray;">无冗余</span>和无<span style="color: LightSkyBlue;">校验</span>的磁盘阵列</li>
              <li>RAID1： <span style="color: GreenYellow;">镜像</span>磁盘阵列</li>
              <li>RAID2：采用纠错的海明码的磁盘阵列</li>
              <li>RAID3：位交叉奇偶校验的磁盘阵列</li>
              <li>RAID4：块交叉奇偶校验的磁盘阵列</li>
              <li>RAID5：无独立校验的奇偶校验磁盘阵列</li>
            </ul>
            <h5 id="span-stylecolor-silverraidspan-stylecolor-lightskyblue0"><span style="color: silver;">RAID<span
                  style="color: LightSkyBlue;">0 </span></span></h5>
            <ul>
              <li>特点：
                <ul>
                  <li>使用条带化技术</li>
                  <li>连续数据块交替存放在不同物理磁盘扇区</li>
                  <li>多个磁盘交叉并行读/写</li>
                </ul>
              </li>
              <li>优点：
                <ul>
                  <li>扩大存储容量</li>
                  <li>提高磁盘存取速度</li>
                </ul>
              </li>
              <li>缺点：
                <ul>
                  <li>无容错能力</li>
                </ul>
              </li>
            </ul>
            <h5 id="span-stylecolor-silverraidspan-stylecolor-greenyellow1"><span style="color: silver;">RAID<span
                  style="color: GreenYellow;">1 </span></span></h5>
            <ul>
              <li>工作方式：
                <ul>
                  <li>两个磁盘同时进行读/写</li>
                  <li>互为备份</li>
                </ul>
              </li>
              <li>优点：
                <ul>
                  <li>若一个磁盘故障，可从另一磁盘读取数据</li>
                </ul>
              </li>
              <li>缺点：
                <ul>
                  <li>实际容量减少一半</li>
                </ul>
              </li>
            </ul>
          </ul>
          <h4 id="span-stylecolor-silver优势"><span style="color: silver;">优势 </span></h4>
          <ul>
            <li>性能提升
              <ul>
                <li>传输速率
                  <ul>
                    <li>多磁盘同时使用提高传输速率</li>
                  </ul>
                </li>
                <li>数据吞吐量
                  <ul>
                    <li>通过并行存取提高数据吞吐量</li>
                  </ul>
                </li>
              </ul>
            </li>
            <li>可靠性提升
              <ul>
                <li>数据安全
                  <ul>
                    <li>通过镜像功能提高安全可靠性</li>
                  </ul>
                </li>
                <li>容错能力
                  <ul>
                    <li>通过数据校验提供容错能力</li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </ul>
        <h2 id="span-stylecolor-gold固态span-span-stylecolor-silver硬盘"><span style="color: Gold;">固态</span> <span
            style="color: silver;">硬盘 </span></h2>
        <ul>
          <h3 id="span-stylecolor-gold特性"><span style="color: Gold;">特性 </span></h3>
          <ul>
            <h4 id="span-stylecolor-silver组成"><span style="color: silver;">组成 </span></h4>
            <ul>
              <li>固态硬盘（SSD）是基于闪存技术的存储器
                <ul>
                  <li>与U盘无本质差别，但容量更大，存取性能更好</li>
                </ul>
              </li>
              <li>组成部分
                <ul>
                  <li>一个或多个闪存芯片</li>
                  <li>闪存翻译层
                    <ul>
                      <li>替代传统磁盘控制器角色</li>
                      <li>将CPU的逻辑块读/写请求翻译成底层物理设备的控制信号</li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
            <p><img
                src="https://cdn-mineru.openxlab.org.cn/model-mineru/prod/f4c9b82aff9e75d81635a4e6f89fa583ec0838d5124b1cd07047a821d4691ebd.jpg"
                alt=""><br>
              图3.15固态硬盘（SSD）</p>
            <h4 id="span-stylecolor-silver-span-stylecolor-limegreen结构span--特点"><span style="color: silver;"> <span
                  style="color: LimeGreen;">结构</span> &amp; 特点 </span></h4>
            <ul>
              <li>闪存结构
                <ul>
                  <li>由B块组成，每块由P页组成</li>
                  <li>页大小：512B~4KB</li>
                  <li>每块包含32~128页</li>
                  <li>块大小：16KB~512KB</li>
                </ul>
              </li>
              <li>读写特性
                <ul>
                  <li>以页为单位读/写</li>
                  <li>写入限制：需先擦除整个块</li>
                  <li>块擦除后的页可直接写入一次</li>
                  <li>重复写会导致块磨损</li>
                </ul>
              </li>
            </ul>
            <h5 id="span-stylecolor-silver特点"><span style="color: silver;">特点 </span></h5>
            <ul>
              <li>随机写入<span style="color: gray;">慢</span>的原因
                <ul>
                  <li>块擦除速度慢，比页访问慢一个数量级</li>
                  <li>修改已有数据需要整块复制</li>
                </ul>
              </li>
              <li>相对传统磁盘的优势
                <ul>
                  <li>随机访问更快</li>
                  <li>无机械噪声和振动</li>
                  <li>能耗低</li>
                  <li>抗震性好</li>
                  <li>安全性高</li>
                </ul>
              </li>
            </ul>
          </ul>
          <h3 id="span-stylecolor-silverspan-stylecolor-gray磨损span-span-stylecolor-gold均衡spanwear-leveling"><span
              style="color: silver;"><span style="color: gray;">磨损</span> <span style="color: Gold;">均衡</span>（Wear
              Leveling） </span></h3>
          <ul>
            <h4 id="span-stylecolor-gray寿命"><span style="color: gray;">寿命 </span></h4>
            <ul>
              <li>缺点
                <ul>
                  <li>闪存擦写寿命有限（几百到几千次）</li>
                  <li>读写集中可能导致部分闪存过度损耗</li>
                  <li>局部损坏可能影响整个SSD</li>
                </ul>
              </li>
            </ul>
            <h4 id="span-stylecolor-silver技术"><span style="color: silver;">技术 </span></h4>
            <ul>
              <h5 id="span-stylecolor-silver-span-stylecolor-limegreen动span态磨损均衡"><span style="color: silver;"> <span
                    style="color: LimeGreen;">动</span>态磨损均衡 </span></h5>
              <ul>
                <li>写入数据时自动选择较<span style="color: gray;">新</span>的闪存块</li>
                <li>让老的闪存块暂时休息</li>
              </ul>
              <h5 id="span-stylecolor-silverspan-stylecolor-lightskyblue静span"><span style="color: silver;"><span
                    style="color: LightSkyBlue;">静</span>~ </span></h5>
              <ul>
                <li>更高级的技术方案
                  <ul>
                    <li>无数据写入时也进行监测</li>
                    <li>自动进行数据分配
                      <ul>
                        <li><u>老</u>闪存块用于存储<span style="color: LightSkyBlue;">静</span>态数据</li>
                        <li><span style="color: gray;">新</span>闪存块负责<span style="color: gray;">日常</span>读写操作</li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
            </ul>
            <h4 id="span-stylecolor-silver提升"><span style="color: silver;">提升 </span></h4>
            <ul>
              <li>实际使用寿命显著提升
                <ul>
                  <li>以256GB SSD为例
                    <ul>
                      <li>擦写寿命500次时需写入125TB才会损坏</li>
                      <li>每天写入10GB数据需30多年才会磨损</li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </ul>
        </ul>
        <h1 id="span-stylecolor-gold缓冲span-span-stylecolor-silver--span-stylecolor-slatebluecache"><span
            style="color: Gold;">缓冲</span> <span style="color: silver;">~ (<span style="color: SlateBlue;">cache
            </span></span></h1>
        <ul>
          <ul>
            <li>
              <p>主存系统效率提升的限制：</p>
              <ul>
                <li>程序转移概率不会很低</li>
                <li>数据分布离散性较大</li>
                <li>单纯依靠并行主存系统提升效率有限</li>
              </ul>
            </li>
            <li>
              <p><span style="color: SlateBlue;">Cache</span>的优势：</p>
              <ul>
                <li>比主存速度更<span style="color: LightSkyBlue;">快</span></li>
                <li>在CPU和主存之间设置可显著提高存储系统效率</li>
              </ul>
            </li>
            <li>
              <p>特点：</p>
              <ul>
                <li>由 <span style="color: Gold;">S</span>RAM组成</li>
                <li>通常直接集成在CPU中</li>
              </ul>
            </li>
          </ul>
          <h2 id="span-stylecolor-silver程序访问的-span-stylecolor-gold局部span性原理"><span style="color: silver;">程序访问的 <span
                style="color: Gold;">局部</span>性原理 </span></h2>
          <ul>
            <h3 id="span-stylecolor-silver概述"><span style="color: silver;">概述 </span></h3>
            <ul>
              <li>包括时间局部性和空间局部性</li>
            </ul>
            <blockquote>
              <p>pro：分析给定代码的时空局部性（2017、2023）</p>
            </blockquote>
            <h4 id="span-stylecolor-limegreen时间span-span-stylecolor-silver局部性"><span style="color: LimeGreen;">时间</span>
              <span style="color: silver;">局部性 </span></h4>
            <ul>
              <li>最近的未来要用到的信息，很可能是现在正在使用的信息
                <ul>
                  <li>原因：
                    <ul>
                      <li>程序中存在盾环</li>
                      <li>需要多次重复执行的子程序段</li>
                      <li>对数组的存储和访问操作</li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
            <h4 id="span-stylecolor-gray空间span-span-stylecolor-silver"><span style="color: gray;">空间</span> <span
                style="color: silver;">~ </span></h4>
            <ul>
              <li>最近的末来要用到的信息</li>
              <li>might与现在正在使用的信息在存储空间上是<span style="color: gray;">邻近</span>的
                <ul>
                  <li>原因：
                    <ul>
                      <li>指令通常是顺序存放、顺序执行的</li>
                      <li>数据一般以向量、数组等形式簇聚地存储</li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
            <h4 id="span-stylecolor-silver在cache中的-span-stylecolor-gold应用"><span style="color: silver;">在cache中的 <span
                  style="color: Gold;">应用 </span></span></h4>
            <ul>
              <li>利用局部性原理:
                <ul>
                  <li>数据存放策略:
                    <ul>
                      <li>将正在使用的部分数据存入Cache</li>
                      <li>Cache特点:
                        <ul>
                          <li>高速</li>
                          <li>容量较小</li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                  <li>访问策略:
                    <ul>
                      <li>CPU主要访问Cache</li>
                    </ul>
                  </li>
                  <li>最终目标:
                    <ul>
                      <li>提高程序执行速度</li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
            <h3 id="span-stylecolor-silvereg-1"><span style="color: silver;">eg </span></h3>
            <ul>
              <p>【例3.2】假设数组元素按行优先方式存储，对于下面的两个程序：</p>
              <p><img
                  src="https://cdn-mineru.openxlab.org.cn/model-mineru/prod/b41550f0178bf3620106cb205eed357ec765a9ec70eeda1a5cf5cda98d67dbf0.jpg"
                  alt=""></p>
              <h4 id="span-stylecolor-silverq"><span style="color: silver;">q </span></h4>
              <ul>
                <p>1）对于数组a的访问，哪个空间局部性更好？哪个时间局部性更好？<br>
                  2）对于指令访问来说，for循环体的空间局部性和时间局部性如何？</p>
              </ul>
              <h4 id="span-stylecolor-silveranswer"><span style="color: silver;">answer </span></h4>
              <ul>
                <li>基本条件：
                  <ul>
                    <li>M、N为2048</li>
                    <li>按字节编址</li>
                    <li>每个数组元素占4字节</li>
                  </ul>
                </li>
              </ul>
              <p><img
                  src="https://cdn-mineru.openxlab.org.cn/model-mineru/prod/3beffe3fd561e33f22d27b23b7735f6b3805a9b89288a00b6514d0ad34b06ace.jpg"
                  alt=""><br>
                图3.16指令和数据在主存的存放</p>
              <blockquote>
                <p>pro：数组按行或列访问命中率的分析（2010）；数组循环访问的命中率分析（2016、2020）</p>
              </blockquote>
              <h5 id="span-stylecolor-lightskyblue数组span-span-stylecolor-silver"><span
                  style="color: LightSkyBlue;">数组</span> <span style="color: silver;">: </span></h5>
              <ul>
                <li>
                  <p>程序A的空间局部性：</p>
                  <ul>
                    <li>访问顺序：a[0][0],a[0][1],,a[0][2047];a[1][0],a[1][1],,a[1][2047]</li>
                    <li>访问顺序与存放顺序一致，空间局部性好</li>
                  </ul>
                </li>
                <li>
                  <p>程序B的空间局部性：</p>
                  <ul>
                    <li>访问顺序：a[0][0],a[1][0].,a[2047][0];a[0][1],a[1][1],,a[2047][1]</li>
                    <li>每次访问跳过2048个数组元素（8192字节）</li>
                    <li>若主存与Cache交换单位&lt;8KB，每访问都需装入新块</li>
                    <li>无空间局部性</li>
                  </ul>
                </li>
                <li>
                  <p>时间局部性：</p>
                  <ul>
                    <li>两个程序都差</li>
                    <li>原因：每个数组元素只访问一次</li>
                  </ul>
                </li>
              </ul>
              <blockquote>
                <p>pro：程序中指令Cache的命中率分析（2014）</p>
              </blockquote>
              <h5 id="span-stylecolor-greenyellow循环span-span-stylecolor-silver体"><span
                  style="color: GreenYellow;">循环</span> <span style="color: silver;">体: </span></h5>
              <ul>
                <li>两个程序的循环体局部性相同：
                  <ul>
                    <li>空间局部性好：指令按序连续存放</li>
                    <li>时间局部性好：内循环体被连续重复执行2048×2048次</li>
                  </ul>
                </li>
              </ul>
              <h5 id="span-stylecolor-silversum"><span style="color: silver;">sum </span></h5>
              <ul>
                <li>虽然功能相同，但执行时间差异大</li>
                <li>原因：内外循环顺序不同导致数组访问空间局部性差异</li>
              </ul>
            </ul>
          </ul>
          <h2 id="span-stylecolor-silver工作span-stylecolor-gold原理"><span style="color: silver;">工作<span
                style="color: Gold;">原理 </span></span></h2>
          <ul>
            <h3 id="span-stylecolor-green结构"><span style="color: green;">结构 </span></h3>
            <ul>
              <li>Cache和主存划分特点：
                <ul>
                  <li>块划分：
                    <ul>
                      <li>都划分为大小相等的块</li>
                      <li>Cache块也称Cache行</li>
                    </ul>
                  </li>
                  <li>块组成：
                    <ul>
                      <li>每块由若干字节组成</li>
                      <li>块长也称行长</li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li>Cache容量特点：
                <ul>
                  <li>容量对比：
                    <ul>
                      <li>远小于主存容量</li>
                      <li>块数远少于主存块数</li>
                    </ul>
                  </li>
                  <li>存储内容：
                    <ul>
                      <li>仅保存主存最活跃块的副本</li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
            <p><img
                src="https://cdn-mineru.openxlab.org.cn/model-mineru/prod/e95e7ed2b82fea1f024168bab35ac7aaf81ff99ed3bddc2a543be0029e74d2bd.jpg"
                alt=""><br>
              图3.17高速缓冲存储器的工作原理</p>
            <blockquote>
              <p>pro：Cache命中对CPU执行时间影响的分析（2013、2015）</p>
            </blockquote>
            <h3 id="span-stylecolor-silverprocess"><span style="color: silver;">process </span></h3>
            <ul>
              <h4 id="span-stylecolor-goldr"><span style="color: Gold;">R </span></h4>
              <ul>
                <li>Cache命中时：
                  <ul>
                    <li>将访存地址转换为Cache地址</li>
                    <li>直接读取Cache，不访问主存</li>
                  </ul>
                </li>
                <li>Cache不命中时：
                  <ul>
                    <li>访问主存</li>
                    <li>将整块数据调入Cache</li>
                    <li>若Cache已满，使用 <span style="color: LimeGreen;">替换</span>算法</li>
                  </ul>
                </li>
              </ul>
              <h4 id="span-stylecolor-limegreenw"><span style="color: LimeGreen;">W </span></h4>
              <ul>
                <li>Cache命中时：
                  <ul>
                    <li>数据一致性：
                      <ul>
                        <li>可能出现数据不一致问题</li>
                      </ul>
                    </li>
                    <li>处理方式：
                      <ul>
                        <li>需按写策略处理</li>
                      </ul>
                    </li>
                    <li>解决方案：
                      <ul>
                        <li><span style="color: Gold;">全</span>写法</li>
                        <li><span style="color: gray;">回</span>写法</li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
              <blockquote>
                <p>attention：</p>
              </blockquote>
              <ul>
                <li>某些计算机的访存方式：
                  <ul>
                    <li>同时访问Cache和主存</li>
                    <li>如果Cache命中：
                      <ul>
                        <li>则终止访存操作</li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
            </ul>
            <h3 id="span-stylecolor-gold性能"><span style="color: Gold;">性能 </span></h3>
            <blockquote>
              <p>pro：Cache命中率的计算（2009）</p>
            </blockquote>
            <ul>
              <h4 id="span-stylecolor-limegreen命中spanspan-stylecolor-royalblue率span-span-stylecolor-silver计算"><span
                  style="color: LimeGreen;">命中</span><span style="color: RoyalBlue;">率</span> <span
                  style="color: silver;">计算 </span></h4>
              <ul>
                <li>命中率计算公式：
                  <ul>
                    <li>H = Nc/(Nc+Nm)</li>
                    <li>Nc：Cache命中次数</li>
                    <li>Nm：访问主存次数</li>
                  </ul>
                </li>
                <li>平均访问时间：
                  <ul>
                    <li>Ta = H×tc + (1-H)×tm</li>
                    <li>tc：Cache访问时间</li>
                    <li>tm：主存访问时间</li>
                  </ul>
                </li>
              </ul>
              <blockquote>
                <p>pro：Cache缺失率对主存带宽的影响（2012）</p>
              </blockquote>
              <h4 id="span-stylecolor-silvereg-2"><span style="color: silver;">eg </span></h4>
              <p>【例3.3】性能计算：</p>
              <ul>
                <li>条件：
                  <ul>
                    <li>Cache速度是主存5倍</li>
                    <li>Cache命中率95%</li>
                  </ul>
                </li>
                <li>计算过程：
                  <ul>
                    <li>Cache存取周期为t</li>
                    <li>主存存取周期为5t</li>
                    <li>平均访问时间T = 0.95×t + 0.05×(t+5t) = 1.25t</li>
                    <li>或T = t + 0.05×5t = 1.25t</li>
                  </ul>
                </li>
                <li>结论：性能提升约4倍</li>
              </ul>
            </ul>
            <h3 id="span-stylecolor-silverkey-环节"><span style="color: silver;">key 环节 </span></h3>
            <ol>
              <li>
                <p>数据查找</p>
                <ul>
                  <li>如何快速判断数据是否在Cache中</li>
                </ul>
              </li>
              <li>
                <p>地址映射</p>
                <ul>
                  <li>主存块如何存放在Cache中</li>
                  <li>如何将主存地址转换为Cache地址</li>
                </ul>
              </li>
              <li>
                <p>替换策略</p>
                <ul>
                  <li>Cache满后的块替换策略</li>
                  <li>块淘汰策略选择</li>
                </ul>
              </li>
              <li>
                <p>写入策略</p>
                <ul>
                  <li>如何保证数据一致性</li>
                  <li>如何提升效率</li>
                </ul>
              </li>
            </ol>
          </ul>
          <h2
            id="span-stylecolor-silverspan-stylecolor-slatebluecachespan和-span-stylecolor-gold主存span-的-span-stylecolor-greenyellow映射span方式">
            <span style="color: silver;"><span style="color: SlateBlue;">Cache</span>和 <span
                style="color: Gold;">主存</span> 的 <span style="color: GreenYellow;">映射</span>方式 </span></h2>
          <ul>
            <li>
              <p>Cache行需要标记位和有效位:</p>
              <ul>
                <li>标记位:
                  <ul>
                    <li>指明是主存中哪一块的副本</li>
                  </ul>
                </li>
                <li>有效位:
                  <ul>
                    <li>说明Cache行中信息是否有效</li>
                  </ul>
                </li>
              </ul>
            </li>
            <li>
              <p><span style="color: DarkRed;">地址</span> <span style="color: GreenYellow;">映射</span>:</p>
              <ul>
                <li>基本定义:
                  <ul>
                    <li>把主存地址空间映射到Cache地址空间</li>
                    <li>按规则将主存信息装入Cache</li>
                  </ul>
                </li>
                <li>映射方法:
                  <ul>
                    <li>共有3种不同的映射方法</li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
          <ul>
            <h3 id="span-stylecolor-gray直接-span-stylecolor-silver"><span style="color: gray;">直接 <span
                  style="color: silver;">~ </span></span></h3>
            <ul>
              <h4 id="span-stylecolor-silverconcept"><span style="color: silver;">concept </span></h4>
              <ul>
                <li>主存块只能装入Cache唯一位置
                  <ul>
                    <li>每个主存块对应固定的Cache位置</li>
                    <li>无法选择其他位置存放</li>
                  </ul>
                </li>
                <li>块冲突情况
                  <ul>
                    <li>若对应位置已有内容则产生冲突</li>
                    <li>需要替换已有块</li>
                  </ul>
                </li>
                <li>特点分析
                  <ul>
                    <li>实现方面
                      <ul>
                        <li>硬件实现简单</li>
                        <li>映射规则固定不灵活</li>
                      </ul>
                    </li>
                    <li>性能方面
                      <ul>
                        <li>块冲突概率最高</li>
                        <li>Cache空间利用率最低</li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
              <blockquote>
                <p>pro：直接映射的地址结构及映射关系的分析（2010、2011、2015）</p>
              </blockquote>
              <h4 id="span-stylecolor-silver映射-span-stylecolor-greenyellow关系"><span style="color: silver;">映射 <span
                    style="color: GreenYellow;">关系 </span></span></h4>
              <ul>
                <li>公式:
                  <ul>
                    <li>Cache行号 <span class="katex"><span class="katex-mathml"><math
                            xmlns="http://www.w3.org/1998/Math/MathML">
                            <semantics>
                              <mrow>
                                <mo>=</mo>
                              </mrow>
                              <annotation encoding="application/x-tex">=</annotation>
                            </semantics>
                          </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span
                              class="strut" style="height:0.3669em;"></span><span
                              class="mrel">=</span></span></span></span> mod Cache</li>
                  </ul>
                </li>
                <li>规则:
                  <ul>
                    <li>假设Cache有<span class="katex"><span class="katex-mathml"><math
                            xmlns="http://www.w3.org/1998/Math/MathML">
                            <semantics>
                              <mrow>
                                <msup>
                                  <mn>2</mn>
                                  <mi>c</mi>
                                </msup>
                              </mrow>
                              <annotation encoding="application/x-tex">2^c</annotation>
                            </semantics>
                          </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span
                              class="strut" style="height:0.6644em;"></span><span class="mord"><span
                                class="mord">2</span><span class="msupsub"><span class="vlist-t"><span
                                    class="vlist-r"><span class="vlist" style="height:0.6644em;"><span
                                        style="top:-3.063em;margin-right:0.05em;"><span class="pstrut"
                                          style="height:2.7em;"></span><span
                                          class="sizing reset-size6 size3 mtight"><span
                                            class="mord mathnormal mtight">c</span></span></span></span></span></span></span></span></span></span></span>行,主存有<span
                        class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML">
                            <semantics>
                              <mrow>
                                <msup>
                                  <mn>2</mn>
                                  <mi>m</mi>
                                </msup>
                              </mrow>
                              <annotation encoding="application/x-tex">2^m</annotation>
                            </semantics>
                          </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span
                              class="strut" style="height:0.6644em;"></span><span class="mord"><span
                                class="mord">2</span><span class="msupsub"><span class="vlist-t"><span
                                    class="vlist-r"><span class="vlist" style="height:0.6644em;"><span
                                        style="top:-3.063em;margin-right:0.05em;"><span class="pstrut"
                                          style="height:2.7em;"></span><span
                                          class="sizing reset-size6 size3 mtight"><span
                                            class="mord mathnormal mtight">m</span></span></span></span></span></span></span></span></span></span></span>块
                    </li>
                    <li>主存块映射规律:
                      <ul>
                        <li>第0块、第<span class="katex"><span class="katex-mathml"><math
                                xmlns="http://www.w3.org/1998/Math/MathML">
                                <semantics>
                                  <mrow>
                                    <msup>
                                      <mn>2</mn>
                                      <mi>c</mi>
                                    </msup>
                                  </mrow>
                                  <annotation encoding="application/x-tex">2^c</annotation>
                                </semantics>
                              </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span
                                  class="strut" style="height:0.6644em;"></span><span class="mord"><span
                                    class="mord">2</span><span class="msupsub"><span class="vlist-t"><span
                                        class="vlist-r"><span class="vlist" style="height:0.6644em;"><span
                                            style="top:-3.063em;margin-right:0.05em;"><span class="pstrut"
                                              style="height:2.7em;"></span><span
                                              class="sizing reset-size6 size3 mtight"><span
                                                class="mord mathnormal mtight">c</span></span></span></span></span></span></span></span></span></span></span>块、第<span
                            class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML">
                                <semantics>
                                  <mrow>
                                    <msup>
                                      <mn>2</mn>
                                      <mrow>
                                        <mi>c</mi>
                                        <mo>+</mo>
                                        <mn>1</mn>
                                      </mrow>
                                    </msup>
                                  </mrow>
                                  <annotation encoding="application/x-tex">2^{c+1}</annotation>
                                </semantics>
                              </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span
                                  class="strut" style="height:0.8141em;"></span><span class="mord"><span
                                    class="mord">2</span><span class="msupsub"><span class="vlist-t"><span
                                        class="vlist-r"><span class="vlist" style="height:0.8141em;"><span
                                            style="top:-3.063em;margin-right:0.05em;"><span class="pstrut"
                                              style="height:2.7em;"></span><span
                                              class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span
                                                  class="mord mathnormal mtight">c</span><span
                                                  class="mbin mtight">+</span><span
                                                  class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span>块映射到Cache第0行
                        </li>
                        <li>第1块、第<span class="katex"><span class="katex-mathml"><math
                                xmlns="http://www.w3.org/1998/Math/MathML">
                                <semantics>
                                  <mrow>
                                    <msup>
                                      <mn>2</mn>
                                      <mi>c</mi>
                                    </msup>
                                    <mo>+</mo>
                                    <mn>1</mn>
                                  </mrow>
                                  <annotation encoding="application/x-tex">2^c+1</annotation>
                                </semantics>
                              </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span
                                  class="strut" style="height:0.7477em;vertical-align:-0.0833em;"></span><span
                                  class="mord"><span class="mord">2</span><span class="msupsub"><span
                                      class="vlist-t"><span class="vlist-r"><span class="vlist"
                                          style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span
                                              class="pstrut" style="height:2.7em;"></span><span
                                              class="sizing reset-size6 size3 mtight"><span
                                                class="mord mathnormal mtight">c</span></span></span></span></span></span></span></span><span
                                  class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span
                                  class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span
                                  class="strut" style="height:0.6444em;"></span><span
                                  class="mord">1</span></span></span></span>块、第<span class="katex"><span
                              class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML">
                                <semantics>
                                  <mrow>
                                    <msup>
                                      <mn>2</mn>
                                      <mrow>
                                        <mi>c</mi>
                                        <mo>+</mo>
                                        <mn>1</mn>
                                      </mrow>
                                    </msup>
                                    <mo>+</mo>
                                    <mn>1</mn>
                                  </mrow>
                                  <annotation encoding="application/x-tex">2^{c+1}+1</annotation>
                                </semantics>
                              </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span
                                  class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span
                                  class="mord"><span class="mord">2</span><span class="msupsub"><span
                                      class="vlist-t"><span class="vlist-r"><span class="vlist"
                                          style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span
                                              class="pstrut" style="height:2.7em;"></span><span
                                              class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span
                                                  class="mord mathnormal mtight">c</span><span
                                                  class="mbin mtight">+</span><span
                                                  class="mord mtight">1</span></span></span></span></span></span></span></span></span><span
                                  class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span
                                  class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span
                                  class="strut" style="height:0.6444em;"></span><span
                                  class="mord">1</span></span></span></span>块映射到Cache第1行</li>
                      </ul>
                    </li>
                    <li>主存块号低<span class="katex"><span class="katex-mathml"><math
                            xmlns="http://www.w3.org/1998/Math/MathML">
                            <semantics>
                              <mrow>
                                <mi>c</mi>
                              </mrow>
                              <annotation encoding="application/x-tex">c</annotation>
                            </semantics>
                          </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span
                              class="strut" style="height:0.4306em;"></span><span
                              class="mord mathnormal">c</span></span></span></span>位即为Cache行号</li>
                    <li>Cache行需设置<span class="katex"><span class="katex-mathml"><math
                            xmlns="http://www.w3.org/1998/Math/MathML">
                            <semantics>
                              <mrow>
                                <mi>t</mi>
                                <mo>=</mo>
                                <mi>m</mi>
                                <mo>−</mo>
                                <mi>c</mi>
                              </mrow>
                              <annotation encoding="application/x-tex">t=m-c</annotation>
                            </semantics>
                          </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span
                              class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span><span
                              class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span
                              class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span
                              class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span
                              class="mord mathnormal">m</span><span class="mspace"
                              style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace"
                              style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut"
                              style="height:0.4306em;"></span><span
                              class="mord mathnormal">c</span></span></span></span>位标记</li>
                  </ul>
                </li>
              </ul>
              <p><img
                  src="https://cdn-mineru.openxlab.org.cn/model-mineru/prod/0d4d9150e1b74972905e0f2411e001d19ac079c052b685d6319df172fd1f46af.jpg"
                  alt=""><br>
                图3.18Cache和主存之间的直接映射方式</p>
              <h4 id="span-stylecolor-darkred地址span-span-stylecolor-silver结构"><span style="color: DarkRed;">地址</span>
                <span style="color: silver;">结构 </span></h4>
              <p><img
                  src="https://cdn-mineru.openxlab.org.cn/model-mineru/prod/1a310ec397e1e430790891edc7b4fe7034517d79896535099a72318e362d5cfc.jpg"
                  alt=""></p>
              <h4 id="span-stylecolor-limegreen访spanspan-stylecolor-gold存"><span style="color: LimeGreen;">访</span><span
                  style="color: Gold;">存 </span></h4>
              <ul>
                <li>根据访存地址 中间c位 找到Cache <span style="color: LimeGreen;">行</span></li>
                <li><span style="color: Gold;">compare</span> Cache行 标记 &amp; 主存地址高t位 标记:
                  <ul>
                    <li><span style="color: gray;">=</span> &amp; 有效位为 <span style="color: LimeGreen;">1</span>:
                      <ul>
                        <li>命中</li>
                        <li>根据块内地址在Cache行中存取</li>
                      </ul>
                    </li>
                    <li><span style="color: purple;">≠</span> || 有效位为<span style="color: purple;">0</span>:
                      <ul>
                        <li>不命中</li>
                        <li>从主存读块到Cache行</li>
                        <li>设置有效位和标记</li>
                        <li>将内容送CPU</li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
            </ul>
            <h3
              id="span-stylecolor-gold全span-span-stylecolor-greenyellow相spanspan-stylecolor-lightskyblue联span-span-stylecolor-silver">
              <span style="color: Gold;">全</span> <span style="color: GreenYellow;">相</span><span
                style="color: LightSkyBlue;">联</span> <span style="color: silver;">~ </span></h3>
            <ul>
              <h4 id="span-stylecolor-silverconcept-1"><span style="color: silver;">concept </span></h4>
              <ul>
                <li>
                  <p>主存块可装入Cache任何位置</p>
                </li>
                <li>
                  <p>每行标记指示来自主存的哪一块</p>
                </li>
                <li>
                  <p>优点:</p>
                  <ul>
                    <li>Cache块冲突概率低</li>
                    <li>空间利用率高</li>
                    <li>命中率高</li>
                  </ul>
                </li>
                <li>
                  <p>缺点:</p>
                  <ul>
                    <li>标记比较速度慢</li>
                    <li>实现成本高<br>
                      <img
                        src="https://cdn-mineru.openxlab.org.cn/model-mineru/prod/a8989ceb071e5ad8c8d6dca134a27f62a4c6286c510cc52ef891f745bf53aba0.jpg"
                        alt=""><br>
                      图3.19Cache和主存之间的全相联映射方式
                    </li>
                  </ul>
                </li>
              </ul>
              <h4 id="span-stylecolor-darkred地址span-span-stylecolor-limegreen结构"><span style="color: DarkRed;">地址</span>
                <span style="color: LimeGreen;">结构 </span></h4>
              <p><img
                  src="https://cdn-mineru.openxlab.org.cn/model-mineru/prod/d778483358bb5cfaa81acdb4053dea9aacce5ec9ea238257e705ba9e2fca92cd.jpg"
                  alt=""></p>
              <h4 id="span-stylecolor-limegreen访spanspan-stylecolor-gold存-1"><span
                  style="color: LimeGreen;">访</span><span style="color: Gold;">存 </span></h4>
              <ul>
                <li><span style="color: Gold;">compare</span>主存地址高位标记与Cache各行标记</li>
                <li>命中情况:
                  <ul>
                    <li>有相等且有效位为1时:
                      <ul>
                        <li>命中</li>
                        <li>根据块内地址取信息</li>
                      </ul>
                    </li>
                    <li>都不相等时:
                      <ul>
                        <li>不命中</li>
                        <li>从主存读块到空闲行</li>
                        <li>设置有效位和标记</li>
                        <li>将内容送CPU</li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
              <blockquote>
                <p>pro：根据地址结构和比较器数量判断映射方式（2018）</p>
              </blockquote>
              <h4 id="span-stylecolor-green硬件span-span-stylecolor-gold实现"><span style="color: green;">硬件</span> <span
                  style="color: Gold;">实现 </span></h4>
              <ul>
                <li>比较器配置:
                  <ul>
                    <li>每个Cache行设置一个比较器</li>
                    <li>比较器位数等于标记字段位数</li>
                  </ul>
                </li>
                <li>存取方式:
                  <ul>
                    <li>采用"按内容访问"的存取方式</li>
                  </ul>
                </li>
                <li>大容量Cache限制:
                  <ul>
                    <li>不适合使用，原因:
                      <ul>
                        <li>时间开销大</li>
                        <li>硬件开销大</li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
            </ul>
            <h3 id="span-stylecolor-gray组spanspan-stylecolor-greenyellow相spanspan-stylecolor-lightskyblue联-"><span
                style="color: gray;">组</span><span style="color: GreenYellow;">相</span><span
                style="color: LightSkyBlue;">联 ~ </span></h3>
            <blockquote>
              <p>pro：组相联映射方式的原理（2009、2016、2018～2020、2023）</p>
            </blockquote>
            <ul>
              <h4 id="span-stylecolor-silverconcept-2"><span style="color: silver;">concept </span></h4>
              <p>将Cache分成Q个大小相等的组</p>
              <ul>
                <li><span style="color: Gold;">主存</span><span style="color: LightSkyBlue;">块</span> 映射:
                  <ul>
                    <li>每个主存块可以装入固定组中的任意一行</li>
                    <li>映射方式
                      <ul>
                        <li>组间：采用直接映射</li>
                        <li>组内：采用全相联映射</li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li><span style="color: silver;">映射</span><span style="color: Gold;">特性</span>
                  <ul>
                    <li>是对直接映射和全相联映射的折中</li>
                    <li>特殊情况
                      <ul>
                        <li>Q=1时变为全相联映射</li>
                        <li>Q=Cache行数时变为直接映射</li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li><span style="color: gray;">路数</span><span style="color: Gold;">特点</span>
                  <ul>
                    <li>基本关系
                      <ul>
                        <li>路数越大，每组Cache行数量越大</li>
                        <li>块冲突概率越低，但相联比较电路越复杂</li>
                      </ul>
                    </li>
                    <li>性能权衡
                      <ul>
                        <li>适当路数可使性能接近全相联</li>
                        <li>成本接近直接映射<br>
                          <img
                            src="https://cdn-mineru.openxlab.org.cn/model-mineru/prod/705d35296eca71ed8eded974c3d677da76008d584c3b528fa5e8971962c6d880.jpg"
                            alt=""><br>
                          图3.20Cache和主存之间的二路组相联映射方式
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
              <h4 id="span-stylecolor-limegreen映射span-span-stylecolor-silver关系"><span
                  style="color: LimeGreen;">映射</span> <span style="color: silver;">关系 </span></h4>
              <ul>
                <li>Cache组号 = mod Cache 组数（Q）</li>
                <li>地址结构：<br>
                  <img
                    src="https://cdn-mineru.openxlab.org.cn/model-mineru/prod/16468247b7f68d80ea35bf713452faaeaab1af0cc4620f1f67e90b71bd4d66a4.jpg"
                    alt="">
                </li>
              </ul>
              <blockquote>
                <p>pro：组相联映射的访存过程及Cache缺失处理过程（2020）</p>
              </blockquote>
              <h4 id="span-stylecolor-limegreen访spanspan-stylecolor-gold存-2"><span
                  style="color: LimeGreen;">访</span><span style="color: Gold;">存 </span></h4>
              <ul>
                <li>according to访存地址中间组号 find 对应Cache组</li>
                <li>compare<span style="color: gray;">组内</span>每行标记 &amp; <span style="color: Gold;">主存</span>地址高位标记
                </li>
                <li>命中:
                  <ul>
                    <li>= &amp; 有效位为1
                      <ul>
                        <li>命中
                          <ul>
                            <li>根据块内地址在Cache行中存取</li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                    <li>≠ || 有效位为0
                      <ul>
                        <li>不命中
                          <ul>
                            <li>从主存读块到对应组空闲行</li>
                            <li>设置有效位和标记</li>
                            <li>将内容送CPU</li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
              <blockquote>
                <p>pro：组相联映射中比较器的个数和位数（2022）</p>
              </blockquote>
              <h4 id="span-stylecolor-green硬件span-span-stylecolor-silver实现"><span style="color: green;">硬件</span> <span
                  style="color: silver;">实现 </span></h4>
              <ul>
                <li>比较器需求
                  <ul>
                    <li>直接映射：1个比较器</li>
                    <li>r路组相联：r个比较器</li>
                  </ul>
                </li>
              </ul>
              <blockquote>
                <p>pro：直接映射、组相联映射相关标记位及总容量的分析（2010）</p>
              </blockquote>
              <h4 id="span-stylecolor-silvereg-3"><span style="color: silver;">eg </span></h4>
              <p>主存条件：</p>
              <ul>
                <li>地址空间：256MB</li>
                <li>按字节编址</li>
                <li>数据Cache：8个Cache行</li>
                <li>行长：64B</li>
              </ul>
              <h5 id="span-stylecolor-silverqa"><span style="color: silver;">q&amp;a: </span></h5>
              <ol>
                <li>Cache总 <span style="color: LimeGreen;">容量</span>计算
                  <ul>
                    <li>总容量 = 存储容量 + 标记阵列容量</li>
                    <li>不考虑脏位和替换算法位</li>
                  </ul>
                </li>
              </ol>
              <blockquote>
                <p>pro：直接映射相关标记位的分析（2015、2021）</p>
              </blockquote>
              <blockquote>
                <p>attention：</p>
              </blockquote>
              <h6 id="span-stylecolor-silver-span-stylecolor-greenyellow标记span阵列结构"><span style="color: silver;"> <span
                    style="color: GreenYellow;">标记</span>阵列结构 </span></h6>
              <ul>
                <li>每Cache行对应一个标记项
                  <ul>
                    <li>包括：有效位、脏位、替换算法位、标记位</li>
                  </ul>
                </li>
                <li>组相联特点
                  <ul>
                    <li>每组各行标记项排成一行</li>
                    <li>各组从上到下排列成二维标记阵列</li>
                  </ul>
                </li>
              </ul>
              <p><img
                  src="https://cdn-mineru.openxlab.org.cn/model-mineru/prod/57f1a99d258e755109902e23acf15b394fc66b1b280f1f9dca674653a358810b.jpg"
                  alt=""><br>
                图3.21二路组相联的标记阵列示意图</p>
              <h6 id="span-stylecolor-silver存储--span-stylecolor-limegreen容量span计算"><span style="color: silver;">存储 <span
                    style="color: LimeGreen;">容量</span>计算 </span></h6>
              <p><img
                  src="https://cdn-mineru.openxlab.org.cn/model-mineru/prod/683ed3f03365e410bb54f631a3aa7975ef5c257a5d5fb4a06bc06596f36764f8.jpg"
                  alt=""><br>
                图3.22Cache行的存储容量示意图</p>
              <ul>
                <li>标记字段长度计算
                  <ul>
                    <li>主存地址：28位(256MB=2^28B)</li>
                    <li>块内地址：6位(2^6B=64B)</li>
                    <li>行号：3位(2^3=8)</li>
                    <li>标记字段：19位(28-6-3)</li>
                  </ul>
                </li>
                <li>总容量：8×(1+19+512)=4256位</li>
              </ul>
              <ol start="2">
                <li>
                  <p>主存<span style="color: DarkRed;">地址</span>3200映射分析</p>
                  <ul>
                    <li>直接映射：Cache行号为2</li>
                    <li>二路组相联：组号2(行号4或5)</li>
                  </ul>
                </li>
                <li>
                  <p><span style="color: LimeGreen;">访</span> <span style="color: Gold;">存</span>过程(地址0123456H)</p>
                  <ul>
                    <li>地址划分
                      <ul>
                        <li>主存标记位：19位</li>
                        <li>块号：3位</li>
                        <li>块内地址：6位</li>
                      </ul>
                    </li>
                    <li>访问步骤
                      <ul>
                        <li>根据块号查Cache对应行</li>
                        <li>比较主存标记位</li>
                        <li>检查有效位</li>
                        <li>根据结果进行相应操作</li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ol>
              <h5 id="span-stylecolor-silver-span-stylecolor-limegreen映射span方式-span-stylecolor-gold比较"><span
                  style="color: silver;"> <span style="color: LimeGreen;">映射</span>方式 <span style="color: Gold;">比较
                  </span></span></h5>
              <ul>
                <li>映射范围
                  <ul>
                    <li>直接映射：固定行</li>
                    <li>全相联映射：所有行</li>
                    <li>N路组相联：N行</li>
                  </ul>
                </li>
                <li>性能对比
                  <ul>
                    <li>命中率：全相联&gt;组相联&gt;直接映射</li>
                    <li>判断开销：直接映射&lt;组相联&lt;全相联</li>
                    <li>空间开销：直接映射&lt;组相联&lt;全相联</li>
                  </ul>
                </li>
              </ul>
            </ul>
            <h2 id="span-stylecolor-silvercache中span-stylecolor-gold主存span块的-span-stylecolor-limegreen替换span算法"><span
                style="color: silver;">Cache中<span style="color: Gold;">主存</span>块的 <span
                  style="color: LimeGreen;">替换</span>算法 </span></h2>
            <ul>
              <h3 id="span-stylecolor-silverconcept-3"><span style="color: silver;">concept </span></h3>
              <ul>
                <li>替换算法使用场景：
                  <ul>
                    <li>需要使用替换算法的映射方式：
                      <ul>
                        <li>全相联映射</li>
                        <li>组相联映射</li>
                      </ul>
                    </li>
                    <li>不需要使用替换算法的映射方式：
                      <ul>
                        <li>直接映射
                          <ul>
                            <li>原因：主存块只能放到唯一固定Cache行</li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
              <h3 id="span-stylecolor-greenyellowtype"><span style="color: GreenYellow;">type </span></h3>
              <ul>
                <h4 id="span-stylecolor-silver随机-span-stylecolor-goldrandspan"><span style="color: silver;">随机( <span
                      style="color: Gold;">RAND</span>) </span></h4>
                <ul>
                  <li>随机确定替换的Cache行</li>
                  <li>特点：
                    <ul>
                      <li>实现简单</li>
                      <li>未依据局部性原理</li>
                      <li>命中率可能较低</li>
                    </ul>
                  </li>
                </ul>
                <h4 id="span-stylecolor-silver先进先出span-stylecolor-grayfspanispan-stylecolor-grayfspano"><span
                    style="color: silver;">先进先出(<span style="color: gray;">F</span>I<span
                      style="color: gray;">F</span>O) </span></h4>
                <ul>
                  <li>选择最早调入的Cache行进行替换</li>
                  <li>特点：
                    <ul>
                      <li>容易实现</li>
                      <li>未依据局部性原理</li>
                      <li>最早进入的块可能仍常用</li>
                    </ul>
                  </li>
                </ul>
                <blockquote>
                  <p>pro：组相联映射中LRU算法的命中分析（2012、2021）</p>
                </blockquote>
                <h4
                  id="span-stylecolor-silver近期最少使用-span-stylecolor-goldlspanspan-stylecolor-grayrspanspan-stylecolor-greenuspan">
                  <span style="color: silver;">近期最少使用( <span style="color: Gold;">L</span><span
                      style="color: gray;">R</span><span style="color: green;">U</span>) </span></h4>
                <ul>
                  <li>基本原理：
                    <ul>
                      <li>依据程序访问的局部性原理</li>
                      <li>选择近期未访问的Cache行替换</li>
                      <li>属于堆栈类算法</li>
                      <li>平均命中率高于FIFO</li>
                    </ul>
                  </li>
                </ul>
                <blockquote>
                  <p>pro：LRU替换位及其位数的计算（2018、2020）</p>
                </blockquote>
                <ul>
                  <h5 id="span-stylecolor-silver1--span-stylecolor-greenyellow细节"><span style="color: silver;">(1) <span
                        style="color: GreenYellow;">细节 </span></span></h5>
                  <ul>
                    <li>
                      <p>计数器设置：</p>
                      <ul>
                        <li>每个Cache行设置计数器(LRU替换位)</li>
                        <li>计数值记录主存块使用情况</li>
                        <li>位数与Cache组大小相关：
                          <ul>
                            <li>二路：1位LRU位</li>
                            <li>四路：2位LRU位</li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                    <li>
                      <p>替换过程示例：</p>
                      <ul>
                        <li>条件：
                          <ul>
                            <li>四路组相联</li>
                            <li>5个主存块{1,2,3,4,5}映射到同一组</li>
                            <li>访问序列{1,2,3,4,1,2,5,1,2,3,4,5}</li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                  </ul>
                  <p><img
                      src="https://cdn-mineru.openxlab.org.cn/model-mineru/prod/172e58f1cfb7469387af458dc7e49c1ea931605bc2c9081f5e57a4932c9604de.jpg"
                      alt=""><br>
                    图3.23LRU算法的替换过程示意图</p>
                  <ul>
                    <li>计数器变化规则：
                      <ul>
                        <li>命中时：
                          <ul>
                            <li>命中行计数器清零</li>
                            <li>比其低的计数器加1</li>
                            <li>其余不变</li>
                          </ul>
                        </li>
                        <li>未命中且有空闲行：
                          <ul>
                            <li>新装入行计数器置0</li>
                            <li>其余全加1</li>
                          </ul>
                        </li>
                        <li>未命中且无空闲行：
                          <ul>
                            <li>计数值为3的行被替换</li>
                            <li>新装入行计数器置0</li>
                            <li>其余全加1</li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                  </ul>
                  <h5 id="span-stylecolor-silver2--span-stylecolor-limegreen抖动span现象"><span style="color: silver;">(2)
                      <span style="color: LimeGreen;">抖动</span>现象 </span></h5>
                  <ul>
                    <li>发生条件：集中访问存储区超过Cache组大小</li>
                    <li>示例：
                      <ul>
                        <li>访问序列：1,2,3,4,5,1,2,3,4,5,...</li>
                        <li>Cache每组4行</li>
                        <li>结果：命中率为0</li>
                      </ul>
                    </li>
                  </ul>
                </ul>
                <h4 id="span-stylecolor-silver最不u经常u使用l-span-stylecolor-goldfspanu算法"><span
                    style="color: silver;">最不<u>经常</u>使用(L <span style="color: Gold;">F</span>U)算法 </span></h4>
                <ul>
                  <li>基本原理：
                    <ul>
                      <li>换出一段时间内访问次数最少的Cache行</li>
                    </ul>
                  </li>
                  <li>实现方式：
                    <ul>
                      <li>每行设置计数器</li>
                      <li>新行装入从0开始计数</li>
                      <li>每次访问计数器加1</li>
                      <li>替换时选择计数值最小的行</li>
                    </ul>
                  </li>
                </ul>
              </ul>
              <h2 id="span-stylecolor-silvercache的-span-stylecolor-gold一致span性问题"><span style="color: silver;">Cache的
                  <span style="color: Gold;">一致</span>性问题 </span></h2>
              <ul>
                <h3 id="span-stylecolor-silverspan-stylecolor-limegreenwspan操作策略"><span style="color: silver;"><span
                      style="color: LimeGreen;">W</span>操作策略 </span></h3>
                <ul>
                  <li>目的：保持Cache和主存内容一致</li>
                  <li>分类：
                    <ul>
                      <li>写命中策略</li>
                      <li>写不命中策略</li>
                    </ul>
                  </li>
                </ul>
                <h3 id="span-stylecolor-limegreenwspan-span-stylecolor-silverspan-stylecolor-lightskyblue命中span策略"><span
                    style="color: LimeGreen;">W</span> <span style="color: silver;"><span
                      style="color: LightSkyBlue;">命中</span>策略 </span></h3>
                <blockquote>
                  <p>pro：直写法的特点（2015）、直写法是否需设修改位（2020）</p>
                </blockquote>
                <ul>
                  <h4
                    id="span-stylecolor-silver-span-stylecolor-gold全span-span-stylecolor-limegreen写span法直写法-write-through">
                    <span style="color: silver;"> <span style="color: Gold;">全</span> <span
                        style="color: LimeGreen;">写</span>法(直写法、Write-through) </span></h4>
                  <ul>
                    <li>基本原理：
                      <ul>
                        <li>CPU同时写入Cache和主存</li>
                        <li>替换时直接覆盖，无需写回</li>
                      </ul>
                    </li>
                    <li>特点：
                      <ul>
                        <li>实现简单</li>
                        <li>保持主存数据正确性</li>
                        <li>缺点：增加访存次数</li>
                      </ul>
                    </li>
                    <li>写缓冲优化：
                      <ul>
                        <li>位置：Cache和主存之间</li>
                        <li>工作方式：
                          <ul>
                            <li>CPU同时写入Cache和写缓冲</li>
                            <li>写缓冲再写入主存</li>
                          </ul>
                        </li>
                        <li>局限性：频繁写时可能溢出</li>
                      </ul>
                    </li>
                  </ul>
                  <blockquote>
                    <p>pro：回写法的修改位（2018、2020）</p>
                  </blockquote>
                  <h4 id="span-stylecolor-silverspan-stylecolor-gray回spanspan-stylecolor-limegreen写span法write-back">
                    <span style="color: silver;"><span style="color: gray;">回</span><span
                        style="color: LimeGreen;">写</span>法(write-back) </span></h4>
                  <ul>
                    <li>基本原理：
                      <ul>
                        <li>仅写入Cache</li>
                        <li>替换时才写回主存</li>
                      </ul>
                    </li>
                    <li>特点：
                      <ul>
                        <li>减少访存次数</li>
                        <li>存在数据不一致风险</li>
                      </ul>
                    </li>
                    <li>修改位(脏位)机制：
                      <ul>
                        <li>1：块被修改，需写回</li>
                        <li>0：块未修改，无需写回</li>
                      </ul>
                    </li>
                  </ul>
                  <h3 id="span-stylecolor-silver-span-stylecolor-gray不span"><span style="color: silver;">~ <span
                        style="color: gray;">不</span>~ </span></h3>
                  <ul>
                    <h4 id="span-stylecolor-silver-span-stylecolor-limegreenwspan-span-stylecolor-gold分配span法"><span
                        style="color: silver;"> <span style="color: LimeGreen;">W</span> <span
                          style="color: Gold;">分配</span>法 </span></h4>
                    <ul>
                      <li>处理步骤：
                        <ul>
                          <li>更新主存单元</li>
                          <li>调入主存块到Cache</li>
                        </ul>
                      </li>
                      <li>特点：
                        <ul>
                          <li>利用空间局部性</li>
                          <li>缺点：每次需从主存读块</li>
                        </ul>
                      </li>
                    </ul>
                    <h4 id="span-stylecolor-silverspan-stylecolor-gray非span"><span style="color: silver;"><span
                          style="color: gray;">非</span>~ </span></h4>
                    <ul>
                      <li>处理方式：
                        <ul>
                          <li>仅更新主存单元</li>
                          <li>不调入主存块</li>
                        </ul>
                      </li>
                      <li>使用搭配：
                        <ul>
                          <li>通常与全写法合用</li>
                          <li>写分配法通常和回写法合用</li>
                        </ul>
                      </li>
                    </ul>
                  </ul>
                  <h3 id="span-stylecolor-silvercache-span-stylecolor-limegreen结构span设计"><span
                      style="color: silver;">Cache <span style="color: LimeGreen;">结构</span>设计 </span></h3>
                  <blockquote>
                    <p>pro：采用分离的指令Cache和数据Cache的主要目的（2014）</p>
                  </blockquote>
                  <ul>
                    <h4 id="span-stylecolor-silver-span-stylecolor-greenyellow分离spancache结构"><span
                        style="color: silver;"> <span style="color: GreenYellow;">分离</span>Cache结构 </span></h4>
                    <ul>
                      <li>背景：指令流水技术发展需求</li>
                      <li>优势：
                        <ul>
                          <li>避免指令预取与数据存取冲突</li>
                          <li>优化不同局部性特征</li>
                        </ul>
                      </li>
                      <li>统一Cache特点：
                        <ul>
                          <li>设计实现简单</li>
                          <li>存在访问冲突</li>
                        </ul>
                      </li>
                    </ul>
                    <h4 id="span-stylecolor-silver-span-stylecolor-gold多级spancache设计"><span style="color: silver;">
                        <span style="color: Gold;">多级</span>Cache设计 </span></h4>
                    <ul>
                      <li>二级Cache示例：
                        <ul>
                          <li>L1Cache（靠近CPU）：
                            <ul>
                              <li>速度快，容量小</li>
                              <li>指令数据通常分离</li>
                              <li>采用写分配法和回写法</li>
                            </ul>
                          </li>
                          <li>L2Cache：
                            <ul>
                              <li>速度和容量居中</li>
                              <li>L1对L2使用全写法</li>
                              <li>L2对主存使用回写法</li>
                            </ul>
                          </li>
                          <li>优势：避免写缓冲饱和溢出</li>
                        </ul>
                      </li>
                    </ul>
                    <p><img
                        src="https://cdn-mineru.openxlab.org.cn/model-mineru/prod/a36a40284b9aa454bc42de878bcab6fe9160cad5f6b92ce9054bac667f2a2cf5.jpg"
                        alt=""></p>
                  </ul>
                </ul>
              </ul>
            </ul>
          </ul>
        </ul>
      </ul>
      <h1 id="span-stylecolor-silverspan-stylecolor-slateblue虚拟spanm"><span style="color: silver;"><span
            style="color: SlateBlue;">虚拟</span>M </span></h1>
      <ul>
        <ul>
          <li>构成
            <ul>
              <li>由主存和辅存共同构成</li>
              <li>在硬件和系统软件的共同管理下工作</li>
            </ul>
          </li>
          <li>透明性
            <ul>
              <li>对于应用程序员而言是透明的</li>
            </ul>
          </li>
          <li>特点
            <ul>
              <li>具有主存的速度</li>
              <li>具有辅存的容量</li>
            </ul>
          </li>
        </ul>
        <h2 id="span-stylecolor-silverconcept-4"><span style="color: silver;">concept </span></h2>
        <ul>
          <h3 id="span-stylecolor-darkred地址span-span-stylecolor-silver空间"><span style="color: DarkRed;">地址</span> <span
              style="color: silver;">空间 </span></h3>
          <ul>
            <h4 id="span-stylecolor-slateblue虚拟span-span-stylecolor-silver"><span style="color: SlateBlue;">虚拟</span>
              <span style="color: silver;">~ </span></h4>
            <ul>
              <li>地址空间统一编址
                <ul>
                  <li>将主存和辅存地址空间合并</li>
                  <li>形成庞大的统一地址空间</li>
                </ul>
              </li>
              <li>用户编程自由度
                <ul>
                  <li>无需关注硬件限制
                    <ul>
                      <li>不受主存容量限制</li>
                      <li>不受程序存放位置限制</li>
                    </ul>
                  </li>
                  <li>提供透明的编程环境</li>
                </ul>
              </li>
            </ul>
            <h4 id="span-stylecolor-greenyellowtype-1"><span style="color: GreenYellow;">type </span></h4>
            <ul>
              <h5 id="span-stylecolor-silverspan-stylecolor-slateblue虚span地址-span-stylecolor-gold逻辑span地址"><span
                  style="color: silver;"><span style="color: SlateBlue;">虚</span>地址( <span
                    style="color: Gold;">逻辑</span>地址) </span></h5>
              <ul>
                <li>用户编程允许涉及的地址</li>
                <li>对应的存储空间称为：
                  <ul>
                    <li>虚拟空间</li>
                    <li>程序空间</li>
                  </ul>
                </li>
              </ul>
              <h5 id="span-stylecolor-silverspan-stylecolor-green实span地址span-stylecolor-lightskyblue物理span地址"><span
                  style="color: silver;"><span style="color: green;">实</span>地址(<span
                    style="color: LightSkyBlue;">物理</span>地址) </span></h5>
              <ul>
                <li>实际的主存单元地址</li>
                <li>对应的是主存地址空间(实地址空间)</li>
                <li>虚地址比实地址要大很多</li>
              </ul>
              <p><img
                  src="https://cdn-mineru.openxlab.org.cn/model-mineru/prod/3f30148f78a751f6de56c12ee740b690d95cef0f05379cb11a3386b06baf0ec8.jpg"
                  alt=""><br>
                图3.24虚拟存储器的三个地址空间</p>
            </ul>
          </ul>
          <h3 id="span-stylecolor-silvercpu-span-stylecolor-limegreen访问span机制"><span style="color: silver;">CPU <span
                style="color: LimeGreen;">访问</span>机制 </span></h3>
          <ul>
            <li>CPU使用<span style="color: SlateBlue;">虚</span>地址时process：
              <ul>
                <li>判断虚地址对应内容whether已装入主存</li>
                <li>if 在主存中：
                  <ul>
                    <li>通过地址变换直接访问主存指示的实际单元</li>
                  </ul>
                </li>
                <li>..不..：
                  <ul>
                    <li>把包含这个字的一页或一段调入主存
                      <ul>
                        <li>调入主存后再访问</li>
                      </ul>
                    </li>
                    <li>若主存已满：
                      <ul>
                        <li>采用替换算法</li>
                        <li>置换主存中的交换块</li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
          <blockquote>
            <p>pro：虚拟存储器只能采用回写法的原因（2016）</p>
          </blockquote>
          <h3 id="span-stylecolor-silver-span-stylecolor-limegreen技术span特点"><span style="color: silver;"> <span
                style="color: LimeGreen;">技术</span>特点 </span></h3>
          <ul>
            <li>类似Cache技术：
              <ul>
                <li>将辅存中经常访问的数据副本--&gt; 主存</li>
              </ul>
            </li>
            <li>特殊机制：
              <ul>
                <li>全相联映射：
                  <ul>
                    <li>每个虚页面可存放到对应主存区域的任何空闲页位置</li>
                  </ul>
                </li>
                <li>回写法处理一致性：
                  <ul>
                    <li>原因：缺页访问辅存代价大</li>
                    <li>结果：不能每次写操作都同时写回磁盘</li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
          <h2 id="span-stylecolor-lightskyblue页spanspan-stylecolor-silver式虚拟存储器"><span
              style="color: LightSkyBlue;">页</span><span style="color: silver;">式虚拟存储器 </span></h2>
          <blockquote>
            <p>以<span style="color: LightSkyBlue;">页</span>为基本单位</p>
          </blockquote>
          <ul>
            <li>页的划分
              <ul>
                <li>主存空间和虚拟地址空间都被划分成相同大小的页
                  <ul>
                    <li>主存空间中的页
                      <ul>
                        <li>物理页</li>
                        <li>实页</li>
                        <li>页框</li>
                      </ul>
                    </li>
                    <li>虚拟地址空间中的页
                      <ul>
                        <li>虚拟页</li>
                        <li>虚页</li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
            <li>页表特点
              <ul>
                <li>记录了程序的虚页调入主存时被安排在主存中的位置</li>
                <li>一般长久地保存在内存中</li>
              </ul>
            </li>
          </ul>
          <h3 id="span-stylecolor-lightskyblue页spanspan-stylecolor-gray表span"><span
              style="color: LightSkyBlue;">页</span><span style="color: gray;">表</span> </h3>
          <ul>
            <h4 id="span-stylecolor-silver组成-1"><span style="color: silver;">组成 </span></h4>
            <ul>
              <li>页表项包含以下位：
                <ul>
                  <li><span style="color: LightSkyBlue;">有效</span>位(装入位)
                    <ul>
                      <li>表示页面在 <span style="color: Gold;">主存</span>中的状态
                        <ul>
                          <li>1: 该虚拟页已从外存调入主存
                            <ul>
                              <li>页表项存放该页的物理页号</li>
                            </ul>
                          </li>
                          <li>0: 未调入主存
                            <ul>
                              <li>页表项可存放该页的磁盘地址</li>
                            </ul>
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                  <li><span style="color: gray;">脏</span>位(<span style="color: GreenYellow;">修改</span>位)
                    <ul>
                      <li>表示页面 <span style="color: LimeGreen;">修改</span>状态
                        <ul>
                          <li>用于判断页面是否被修改</li>
                          <li>在回写策略中用于判断替换时是否需要写回磁盘</li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                  <li><span style="color: LimeGreen;">引用</span>位(使用位)
                    <ul>
                      <li>用于页面 <span style="color: GreenYellow;">替换</span>策略
                        <ul>
                          <li>可实现FIFO(最先调入)策略</li>
                          <li>可实现LRU(最近最少使用)策略</li>
                          <li>其他替换策略<br>
                            <img
                              src="https://cdn-mineru.openxlab.org.cn/model-mineru/prod/b8ab5292e69b51c36468563f144fde40a570b1a370f205fa85c05cc588cbae16.jpg"
                              alt=""><br>
                            图3.25主存中的页表示例
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
            <blockquote>
              <p>pro：数组的分页存放、缺页异常分析及缺页处理过程（2014、2019、2023）</p>
            </blockquote>
            <h4 id="span-stylecolor-gold缺spanspan-stylecolor-lightskyblue页span-span-stylecolor-silver处理过程"><span
                style="color: Gold;">缺</span><span style="color: LightSkyBlue;">页</span> <span
                style="color: silver;">处理过程 </span></h4>
            <p>CPU访问数据的两种情况：</p>
            <ul>
              <li><span style="color: LightSkyBlue;">数据</span> in <span style="color: gray;">已存在</span>页面时：
                <ul>
                  <li>如第1页，有效位为1，说明该页已存放在主存中</li>
                  <li>通过地址转换部件将虚拟地址转换为物理地址</li>
                  <li>到相应的主存实页中存取数据</li>
                </ul>
              </li>
              <li>~ in <span style="color: GreenYellow;">缺失</span>页面时：
                <ul>
                  <li><span style="font-size:12px">如第5页，有效位为0，则发生"缺页"异常</span></li>
                  <li>调用 OS' <span style="color: Gold;">缺</span><span style="color: LightSkyBlue;">页</span>异常处理程序</li>
                  <li>step：
                    <ul>
                      <li>从<span style="color: gray;">磁盘</span>调入页面：
                        <ul>
                          <li>根据对应表项中的存放位置字段</li>
                          <li>将所缺页面调入一个空闲的物理页框</li>
                        </ul>
                      </li>
                      <li>处理<span style="color: Goldenrod;">空闲</span>页框不足：
                        <ul>
                          <li>若主存中没有空闲页框时</li>
                          <li>需要选择一个页面进行替换</li>
                          <li>采用回写策略时：
                            <ul>
                              <li>根据脏位判断</li>
                              <li>确定是否需要写回磁盘</li>
                            </ul>
                          </li>
                        </ul>
                      </li>
                      <li><span style="color: GreenYellow;">更新</span>页表：</li>
                      <li>完成缺页处理后</li>
                      <li>对页表进行相应更新</li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
            <h4 id="span-stylecolor-silver优缺点"><span style="color: silver;">优缺点 </span></h4>
            <ul>
              <li>优点：
                <ul>
                  <li>页面的长度固定</li>
                  <li>页表简单</li>
                  <li>调入方便</li>
                </ul>
              </li>
              <li>缺点：
                <ul>
                  <li>最后一页的零头将无法利用而造成浪费</li>
                  <li>页不是逻辑上独立的实体，处理、保护和共享都不及段式虚拟存储器方便</li>
                </ul>
              </li>
            </ul>
          </ul>
          <h3 id="span-stylecolor-darkred地址span-span-stylecolor-limegreen转换span"><span style="color: DarkRed;">地址</span>
            <span style="color: LimeGreen;">转换</span> </h3>
          <blockquote>
            <p>pro：虚拟地址结构的分析（2011、2019、2021）</p>
          </blockquote>
          <ul>
            <h4 id="span-stylecolor-silverspan-stylecolor-slateblue虚拟span地址--span-stylecolor-lightskyblue物理span"><span
                style="color: silver;"><span style="color: SlateBlue;">虚拟</span>地址 &amp; <span
                  style="color: LightSkyBlue;">物理</span>~ </span></h4>
            <ul>
              <li><span style="color: SlateBlue;">虚拟</span>地址分为两个字段：
                <ul>
                  <li><span style="color: LightSkyBlue;">高</span>位为 <span style="color: SlateBlue;">虚</span><span
                      style="color: LightSkyBlue;">页</span><span style="color: gray;">号</span></li>
                  <li><span style="color: LimeGreen;">低</span>位为 页内 <span style="color: GreenYellow;">偏移</span><span
                      style="color: DarkRed;">地址</span></li>
                </ul>
              </li>
              <li><span style="color: LightSkyBlue;">物理</span>地址分为两个字段：
                <ul>
                  <li><span style="color: LightSkyBlue;">高</span>位为物理<span style="color: LightSkyBlue;">页</span><span
                      style="color: gray;">号</span></li>
                  <li><span style="color: LimeGreen;">低</span>位为 页内 <span style="color: LimeGreen;">偏移</span>地址</li>
                </ul>
              </li>
              <li>特点：
                <ul>
                  <li>these two 页面 <span style="color: gray;">大小</span> <span style="color: Gold;">相同</span>，页内 <span
                      style="color: LimeGreen;">偏移</span>地址 <span style="color: LightSkyBlue;">=</span></li>
                  <li><span style="color: SlateBlue;">虚</span> -&gt; <span style="color: LightSkyBlue;">物理</span>地址的 转换由
                    <span style="color: LightSkyBlue;">页</span><span style="color: gray;">表</span> <span
                      style="color: Gold;">实现</span></li>
                  <li><span style="color: LightSkyBlue;">页</span><span style="color: gray;">表</span>
                    <ul>
                      <li>concept:
                        <ul>
                          <li>存放在主存中的对照表
                            <ul>
                              <li>包含虚页号和实页号的对应关系</li>
                              <li>用于查找虚页号对应的实页号</li>
                            </ul>
                          </li>
                        </ul>
                      </li>
                      <li>作用</li>
                      <li>地址 <span style="color: GreenYellow;">映射</span>
                        <ul>
                          <li>建立<span style="color: SlateBlue;">虚</span>拟地址和<span
                              style="color: LightSkyBlue;">物理</span>地址之间的映射关系</li>
                        </ul>
                      </li>
                      <li>地址 <span style="color: LimeGreen;">转换</span>
                        <ul>
                          <li>实现地址空间的转换过程</li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
            <blockquote>
              <p>pro：虚拟地址主存物理地址（2011、2013、2018、2022）</p>
            </blockquote>
            <h4 id="span-stylecolor-darkred地址span-span-stylecolor-limegreen转换span-1"><span
                style="color: DarkRed;">地址</span> <span style="color: LimeGreen;">转换</span> </h4>
            <ul>
              <li>基本步骤：
                <ul>
                  <li>找到页表<span style="color: gray;">首</span>地址
                    <ul>
                      <li>通过页表基址寄存器定位（①）</li>
                    </ul>
                  </li>
                  <li><span style="color: LimeGreen;">定位</span>页表项
                    <ul>
                      <li>使用虚拟地址高位的虚拟页号（②）</li>
                    </ul>
                  </li>
                  <li><span style="color: GreenYellow;">检查</span><span style="color: gray;">装入</span>位
                    <ul>
                      <li>if 装入位 = 1：
                        <ul>
                          <li>获取物理页号（③）</li>
                          <li>与页内地址拼接（④）</li>
                          <li>生成物理地址</li>
                        </ul>
                      </li>
                      <li>if 装入位 = 0：
                        <ul>
                          <li>表示发生缺页</li>
                          <li>需要操作系统处理</li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
            <p><img
                src="https://cdn-mineru.openxlab.org.cn/model-mineru/prod/8abbc24dc44951166da271761d02b9beff867be6de5e5dc08cc6e6325bcebf8e.jpg"
                alt=""><br>
              图3.26页式虚拟存储器的地址变换过程</p>
            <h3 id="span-stylecolor-greenyellow快spanspan-stylecolor-gray表-span-stylecolor-silvertlb"><span
                style="color: GreenYellow;">快</span><span style="color: gray;">表 <span style="color: silver;">（TLB）
                </span></span></h3>
            <ul>
              <h4 id="span-stylecolor-silver引入"><span style="color: silver;">引入 </span></h4>
              <ul>
                <li>访存过程中：
                  <ul>
                    <li>访问主存次数增加：
                      <ul>
                        <li>第一次：访问主存查页表</li>
                        <li>第二次：访问主存取数据</li>
                      </ul>
                    </li>
                    <li>若发生缺页：
                      <ul>
                        <li>需要额外进行：
                          <ul>
                            <li>页面替换</li>
                            <li>页面修改</li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                    <li>结论：
                      <ul>
                        <li><span style="color: SlateBlue;">虚拟</span> 存储机制 cause 访问主存次数增加</li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
              <blockquote>
                <p>pro：TLB的硬件实现（2018），TLB和Cache的比较（2020）</p>
              </blockquote>
              <h4 id="span-stylecolor-gold原理-1"><span style="color: Gold;">原理 </span></h4>
              <ul>
                <li>基于程序访问的 <span style="color: Gold;">局部</span>性原理：
                  <ul>
                    <li>特点：
                      <ul>
                        <li>在一段时间内总是<span style="color: gray;">经常</span>访问某些页</li>
                      </ul>
                    </li>
                    <li>解决：
                      <ul>
                        <li><span style="color: GreenYellow;">快</span><span style="color: gray;">表</span>(TLB)：
                          <ul>
                            <li>由高速缓冲器组成</li>
                            <li>存放常用页的页表项</li>
                            <li>慢表(Page)：
                              <ul>
                                <li>放在主存中的页表</li>
                              </ul>
                            </li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li>process：
                  <ul>
                    <li>第一步：
                      <ul>
                        <li>查找快表</li>
                      </ul>
                    </li>
                    <li>第二步：
                      <ul>
                        <li>if 命<span style="color: gray;">中</span>：
                          <ul>
                            <li>无须访问主存中的页表</li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
              <blockquote>
                <p>pro：TLB映射方式、地址划分与标记字段：与Cache相同（2016、2021）</p>
              </blockquote>
              <h4 id="span-stylecolor-gold实现"><span style="color: Gold;">实现 </span></h4>
              <ul>
                <li>硬件实现：
                  <ul>
                    <li>用 <span style="color: Gold;">S</span>RAM实现</li>
                    <li>工作原理类似于Cache</li>
                    <li>通常采用全相联或组相联映射方式</li>
                  </ul>
                </li>
                <li>TLB表项 <span style="color: Gold;">组成</span>：
                  <ul>
                    <li>页表表项内容</li>
                    <li>TLB标记</li>
                  </ul>
                </li>
                <li><span style="color: GreenYellow;">映射</span>方式：
                  <ul>
                    <li><span style="color: Gold;">全</span><span style="color: GreenYellow;">相</span><span
                        style="color: LightSkyBlue;">联</span>映射：
                      <ul>
                        <li>TLB标记 = 对应页表项的虚拟<span style="color: LightSkyBlue;">页</span>号</li>
                      </ul>
                    </li>
                    <li><span style="color: gray;">组</span>~ ：
                      <ul>
                        <li>TLB标记=对应<span style="color: SlateBlue;">虚拟</span><span
                            style="color: LightSkyBlue;">页</span>号的<span style="color: LightSkyBlue;">高</span>位部分</li>
                        <li>虚拟<span style="color: LightSkyBlue;">页</span>号的 <span
                            style="color: LimeGreen;">低</span>位部分作为TLB组的<span style="color: gray;">组</span>号</li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
            </ul>
            <h3
              id="span-stylecolor-silver-have--span-stylecolor-goldtspanlspan-stylecolor-goldbspan和span-stylecolor-slatebluecachespan的-span-stylecolor-royalblue多级span存储系统">
              <span style="color: silver;"> have <span style="color: Gold;">T</span>L<span
                  style="color: Gold;">B</span>和<span style="color: SlateBlue;">Cache</span>的 <span
                  style="color: RoyalBlue;">多级</span>存储系统 </span></h3>
            <ul>
              <h4 id="span-stylecolor-gold组成span--span-stylecolor-silver--工作原理"><span style="color: Gold;">组成</span>
                <span style="color: silver;"> &amp; 工作原理 </span></h4>
              <ul>
                <li>CPU给出32位虚拟地址</li>
                <li>TLB采用 <span style="color: Gold;">全</span><span style="color: GreenYellow;">相</span><span
                    style="color: LightSkyBlue;">联</span>方式
                  <ul>
                    <li>每项都有比较器</li>
                  </ul>
                </li>
                <li><span style="color: LimeGreen;">查找</span>process
                  <ul>
                    <li>将<span style="color: SlateBlue;">虚</span><span style="color: LightSkyBlue;">页</span>号 &amp;
                      TLB标记字段同时比较</li>
                    <li>命中情况:
                      <ul>
                        <li>若某项相等 &amp; 有效位为1</li>
                        <li>TLB命中</li>
                        <li>直接通过TLB进行地址转换</li>
                      </ul>
                    </li>
                    <li>未~:
                      <ul>
                        <li>TLB <span style="color: LimeGreen;">缺失</span></li>
                        <li>访问 <span style="color: Gold;">主存</span>查 页表</li>
                        <li>使用<span style="color: LightSkyBlue;">两</span> <span style="color: Gold;">级</span>页表方式
                          <ul>
                            <li>虚页号:
                              <ul>
                                <li><span style="color: LightSkyBlue;">页</span> <span
                                    style="color: GreenYellow;">目录</span>索引 + <span
                                    style="color: LightSkyBlue;">页</span><span style="color: gray;">表</span>索引</li>
                              </ul>
                            </li>
                            <li>through these two -&gt; <span style="color: LightSkyBlue;">页</span>表<span
                                style="color: gray;">项</span> to 地址转换</li>
                            <li>TLB <span style="color: GreenYellow;">更新</span>
                              <ul>
                                <li>将表项调入TLB</li>
                                <li>若已满需替换<br>
                                  <img
                                    src="https://cdn-mineru.openxlab.org.cn/model-mineru/prod/631bb0e61b3bdacef3897c62f9b2563c6e1aa46c348e5f719e87b9db2f47ed57.jpg"
                                    alt=""><br>
                                  图3.27TLB和Cache的访问过程
                                </li>
                              </ul>
                            </li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
              <h4 id="span-stylecolor-greenyellow快span-span-stylecolor-silver表---span-stylecolor-gold慢span表的查找"><span
                  style="color: GreenYellow;">快</span> <span style="color: silver;">表 &amp; <span
                    style="color: Gold;">慢</span>表的查找 </span></h4>
              <ul>
                <li>can同步进行查找</li>
                <li>if 快表中有虚页号:
                  <ul>
                    <li>快速找到实页号</li>
                    <li>慢表查找作废</li>
                    <li>访问主存速度几乎不下降</li>
                  </ul>
                </li>
              </ul>
              <blockquote>
                <p>pro：TLB、Cache和Page缺失组合的分析（2010）</p>
              </blockquote>
              <h4 id="span-stylecolor-limegreen访问span-span-stylecolor-silver过程"><span
                  style="color: LimeGreen;">访问</span> <span style="color: silver;">过程 </span></h4>
              <ul>
                <h5 id="span-stylecolor-limegreen缺失span-span-stylecolor-silvertype"><span
                    style="color: LimeGreen;">缺失</span> <span style="color: silver;">type </span></h5>
                <ul>
                  <li>TLB缺失：页表项不在TLB中</li>
                  <li>Cache缺失：主存块不在Cache中</li>
                  <li>Page缺失：页面不在主存中
                    <ul>
                      <li>Page缺失时TLB必然缺失</li>
                      <li>Page缺失时Cache必然缺失</li>
                    </ul>
                  </li>
                </ul>
                <p><img
                    src="https://cdn-mineru.openxlab.org.cn/model-mineru/prod/410f211a8065de602231efcdde6fb31482045afcb7cd24653c854c6b447608e7.jpg"
                    alt=""><br>
                  图3.28带TLB虚拟存储器的CPU访存过程</p>
                <h5 id="span-stylecolor-silver-span-stylecolor-gold组合"><span style="color: silver;">.. <span
                      style="color: Gold;">组合 </span></span></h5>
                <p>表3.3TLB、Page、Cache三种缺失的可能组合情况<br>
                  <img
                    src="https://cdn-mineru.openxlab.org.cn/model-mineru/prod/5449e48e05a1210c3ad8e1dda8ec750f02c257f2e7997847b56ece5d409deea7.jpg"
                    alt="">
                </p>
                <h5 id="span-stylecolor-silverdifferent组合-span-stylecolor-gold处理"><span
                    style="color: silver;">different组合' <span style="color: Gold;">处理 </span></span></h5>
                <ul>
                  <li>第1种组合：最佳情况，无需访问主存</li>
                  <li>第2、3种组合：需访问一次主存</li>
                  <li>第4种组合：需访问两次主存</li>
                  <li>第5种组合：
                    <ul>
                      <li>发生"缺页异常"</li>
                      <li>需访问磁盘</li>
                      <li>至少访问两次主存</li>
                    </ul>
                  </li>
                  <li>处理方式：
                    <ul>
                      <li>Cache缺失：硬件处理</li>
                      <li>缺页处理：软件处理(操作系统缺页异常处理程序)</li>
                      <li>TLB缺失：可硬件或软件处理</li>
                    </ul>
                  </li>
                </ul>
                <blockquote>
                  <p>attention：</p>
                </blockquote>
                <p><span style="font-size: 12px;">(OS 第3章: 同时具有TLB和Cache的存储系统, 虚实地址转换'eg)</span></p>
              </ul>
            </ul>
            <h2 id="span-stylecolor-silverspan-stylecolor-gray段span式-"><span style="color: silver;"><span
                  style="color: gray;">段</span>式 ~ </span></h2>
            <ul>
              <h3 id="span-stylecolor-silver划分---span-stylecolor-limegreen结构"><span style="color: silver;">划分 &amp;
                  <span style="color: LimeGreen;">结构 </span></span></h3>
              <ul>
                <li>段的划分
                  <ul>
                    <li>按程序的逻辑结构划分</li>
                    <li>段长度特点
                      <ul>
                        <li>不同程序段长不同</li>
                        <li>长度可变</li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li>虚拟地址结构
                  <ul>
                    <li>由两部分组成
                      <ul>
                        <li>段号部分</li>
                        <li>段内地址部分</li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
              <h3 id="span-stylecolor-darkred地址spanspan-stylecolor-silver-span-stylecolor-limegreen变换span机制"><span
                  style="color: DarkRed;">地址</span><span style="color: silver;"> <span
                    style="color: LimeGreen;">变换</span>机制 </span></h3>
              <ul>
                <li>通过段表实现虚拟地址到实地址的变换
                  <ul>
                    <li>段表结构
                      <ul>
                        <li>是程序的逻辑段和主存位置的对照表</li>
                        <li>段表每行记录包含:
                          <ul>
                            <li>段号</li>
                            <li>装入位</li>
                            <li>段起点</li>
                            <li>段长等信息</li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                    <li>CPU访存过程:
                      <ul>
                        <li>第一步:根据段表基地址与段号拼接成段表项</li>
                        <li>第二步:根据装入位判断段是否在主存
                          <ul>
                            <li>装入位为"1":表示段已在主存</li>
                            <li>装入位为"0":表示段不在主存</li>
                          </ul>
                        </li>
                        <li>第三步:若在主存
                          <ul>
                            <li>读出段起始地址</li>
                            <li>与段内地址相加得到实地址</li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
              <p><img
                  src="https://cdn-mineru.openxlab.org.cn/model-mineru/prod/1b0fa6804dac3b58468ab24b6f02dbc573bbcb4d48f2326802894513dae0c641.jpg"
                  alt=""><br>
                图3.29段式虚拟存储器的地址变换过程</p>
              <h3 id="span-stylecolor-gold特点"><span style="color: Gold;">特点 </span></h3>
              <ul>
                <h4 id="span-stylecolor-greenyellow透明spanspan-stylecolor-silver性"><span
                    style="color: GreenYellow;">透明</span><span style="color: silver;">性 </span></h4>
                <ul>
                  <li>分段对程序员不透明
                    <ul>
                      <li>因为段是程序逻辑结构决定的独立部分</li>
                    </ul>
                  </li>
                  <li>分页对程序员透明
                    <ul>
                      <li>编程时无需知道分页方式</li>
                    </ul>
                  </li>
                </ul>
                <h4 id="span-stylecolor-silver优缺点-1"><span style="color: silver;">优缺点 </span></h4>
                <ul>
                  <li>优点:
                    <ul>
                      <li>段的分界与程序自然分界对应
                        <ul>
                          <li>更符合程序的逻辑结构</li>
                        </ul>
                      </li>
                      <li>具有逻辑独立性
                        <ul>
                          <li>每段都是独立的功能单位</li>
                        </ul>
                      </li>
                      <li>易于编译、管理、修改和保护
                        <ul>
                          <li>编译: 可独立编译</li>
                          <li>管理: 按段进行管理</li>
                          <li>修改: 可按段修改</li>
                          <li>保护: 可按段设置访问权限</li>
                        </ul>
                      </li>
                      <li>便于多道程序共享
                        <ul>
                          <li>可以共享代码段</li>
                          <li>数据段独立保护</li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                  <li>缺点:
                    <ul>
                      <li>段长度可变导致空间分配不便
                        <ul>
                          <li>难以找到合适大小的空闲空间</li>
                          <li>需要复杂的内存分配算法</li>
                        </ul>
                      </li>
                      <li>易在段间留下碎片
                        <ul>
                          <li>产生外部碎片</li>
                          <li>降低内存利用率</li>
                        </ul>
                      </li>
                      <li>空间利用效率低
                        <ul>
                          <li>由于碎片问题</li>
                          <li>实际可用空间减少</li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                </ul>

              </ul>
              <h2 id="span-stylecolor-silverspan-stylecolor-gray段spanspan-stylecolor-lightskyblue页span式"><span
                  style="color: silver;"><span style="color: gray;">段</span><span
                    style="color: LightSkyBlue;">页</span>式~ </span></h2>
              <ul>
                <h3 id="span-stylecolor-limegreen结构"><span style="color: LimeGreen;">结构 </span></h3>
                <ul>
                  <li>程序分<span style="color: gray;">段</span>后再分<span style="color: LightSkyBlue;">页</span>
                    <ul>
                      <li>每段划分为固定大小的页</li>
                      <li>主存空间划分为等大的页</li>
                      <li>以页为基本交换单位</li>
                    </ul>
                  </li>
                  <li>程序结构
                    <ul>
                      <li>每程序对应一个段表</li>
                      <li>每段对应一个页表</li>
                      <li>段的特点
                        <ul>
                          <li>段长必须是页长的整数倍</li>
                          <li>段起点必须是页的起点</li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                </ul>
                <h3 id="span-stylecolor-darkred地址spanspan-stylecolor-limegreen变换-span-stylecolor-silverprocess"><span
                    style="color: DarkRed;">地址</span><span style="color: LimeGreen;">变换 <span
                      style="color: silver;">process </span></span></h3>
                <ul>
                  <li>虚地址分为三部分:
                    <ul>
                      <li>段<span style="color: gray;">号</span></li>
                      <li>段内<span style="color: LightSkyBlue;">页</span><span style="color: gray;">号</span></li>
                      <li><span style="color: LightSkyBlue;">页</span>内<span style="color: DarkRed;">地址</span></li>
                    </ul>
                  </li>
                  <li>CPU访存步骤:
                    <ul>
                      <li>根据段号得到段表地址</li>
                      <li>从段表取出页表起始地址与段内页号合成页表地址</li>
                      <li>从页表取出实页号与页内地址拼接成实地址</li>
                    </ul>
                  </li>
                </ul>
                <h3 id="span-stylecolor-silver优缺点-2"><span style="color: silver;">优缺点 </span></h3>
                <ul>
                  <li>优点:
                    <ul>
                      <li>兼具 <span style="color: LightSkyBlue;">页</span>式和<span style="color: gray;">段</span>式 的优点</li>
                      <li>可<u>按段</u> 实现 <span style="color: Gold;">共享</span>和 <span style="color: LimeGreen;">保护</span>
                      </li>
                    </ul>
                  </li>
                  <li>缺点:
                    <ul>
                      <li>需<u>两次查表</u></li>
                      <li>系统开销大</li>
                    </ul>
                  </li>
                </ul>
              </ul>
              <h2
                id="span-stylecolor-silver-span-stylecolor-gold虚拟span存储器virtual-memory与span-stylecolor-slatebluecachespan的比较">
                <span style="color: silver;"> <span style="color: Gold;">虚拟</span>存储器Virtual memory与<span
                    style="color: SlateBlue;">Cache</span>的比较 </span></h2>
              <ul>
                <h3 id="span-stylecolor-silversame"><span style="color: silver;">same: </span></h3>
                <ul>
                  <li>目标都是提高系统性能
                    <ul>
                      <li>都有容量、速度、价格梯度</li>
                    </ul>
                  </li>
                  <li>数据组织方式相似
                    <ul>
                      <li>都划分为信息块作为交换单位</li>
                      <li>虚存系统信息块更大</li>
                    </ul>
                  </li>
                  <li>管理机制相似
                    <ul>
                      <li>都有地址映射</li>
                      <li>都有替换算法</li>
                      <li>都有更新策略</li>
                    </ul>
                  </li>
                  <li>原理相似
                    <ul>
                      <li>都依据局部性原理</li>
                      <li>采用"快速缓存"思想</li>
                      <li>将活跃数据放在高速部件</li>
                    </ul>
                  </li>
                </ul>
                <h3 id="span-stylecolor-silver不同"><span style="color: silver;">不同 </span></h3>
                <ul>
                  <li>
                    <p>解决 <span style="color: Gold;">目标</span>不同</p>
                    <ul>
                      <li>Cache解决系统速度</li>
                      <li>虚拟存储器解决主存容量</li>
                    </ul>
                  </li>
                  <li>
                    <p>实现<span style="color: Goldenrod;">方式</span>不同</p>
                    <ul>
                      <li><span style="color: SlateBlue;">Cache</span>全由<span style="color: green;">硬件</span>实现
                        <ul>
                          <li>对所有程序员透明</li>
                        </ul>
                      </li>
                      <li>虚拟存储器由OS和硬件共同实现
                        <ul>
                          <li>对系统程序员不透明</li>
                          <li>对应用程序员透明</li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                </ul>
                <blockquote>
                  <p>pro：Cache缺失和缺页的处理开销对比（2016）</p>
                </blockquote>
                <ul>
                  <li>
                    <p>不命中影响不同</p>
                    <ul>
                      <li>CPU速度约为Cache的10倍</li>
                      <li>主存速度为硬盘的100倍以上</li>
                      <li>虚拟存储器不命中对系统影响更大</li>
                    </ul>
                  </li>
                  <li>
                    <p>访问通路不同</p>
                    <ul>
                      <li>CPU与Cache和主存有直接通路
                        <ul>
                          <li>Cache不命中时可直接与CPU通信</li>
                        </ul>
                      </li>
                      <li>CPU与辅存无直接通路
                        <ul>
                          <li>虚存不命中需先调入主存</li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                </ul>
              </ul>
            </ul>
          </ul>
        </ul>
      </ul>
      <h1 id="span-stylecolor-silver本章小结"><span style="color: silver;">本章小结 </span></h1>
      <p>1）存储器系统为何要分这些层次？计算机如何管理这些层次？</p>
      <ul>
        <li>
          <p>存储系统层次的作用</p>
          <ul>
            <li>Cache-主存层
              <ul>
                <li>主要对CPU访存起加速作用</li>
                <li>CPU访存速度接近Cache速度</li>
                <li>寻址空间和位价接近主存</li>
              </ul>
            </li>
            <li>主存-辅存层
              <ul>
                <li>主要起扩容作用</li>
                <li>程序员使用的存储器容量和位价接近辅存</li>
                <li>速度接近主存</li>
              </ul>
            </li>
            <li>整体效果
              <ul>
                <li>速度快</li>
                <li>容量大</li>
                <li>位价低</li>
              </ul>
            </li>
          </ul>
        </li>
        <li>
          <p>层次间信息调度方式</p>
          <ul>
            <li>主存与Cache之间
              <ul>
                <li>全部由硬件自动完成</li>
              </ul>
            </li>
            <li>主存与辅存之间
              <ul>
                <li>采用虚拟存储技术实现</li>
                <li>通过软/硬结合技术组成虚拟存储器</li>
                <li>程序员可用较大的虚拟地址空间编程</li>
                <li>运行时由软/硬件自动完成虚拟地址到物理地址的转换</li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
      <p>2.影响Cache性能的因素有哪些？</p>
      <ul>
        <li>
          <p>决定Cache系统访存效率重要因素是命中率，它与很多因素有关：</p>
          <ul>
            <li>命中率与映射方式有关
              <ul>
                <li>全相联映射方式的命中率最高</li>
                <li>直接映射方式的命中率最低</li>
              </ul>
            </li>
            <li>命中率与Cache容量有关
              <ul>
                <li>Cache容量越大，命中率就越高</li>
              </ul>
            </li>
            <li>命中率与主存块（或Cache行）的大小有关
              <ul>
                <li>主存块的大小要适中</li>
              </ul>
            </li>
          </ul>
        </li>
        <li>
          <p>其他影响Cache总体性能的因素：</p>
          <ul>
            <li>系统是采用单级还是采用多级Cache</li>
            <li>数据Cache和指令Cache是分离还是合在一起</li>
            <li>主存-总线-Cache-CPU之间采用什么架构</li>
          </ul>
        </li>
      </ul>
      <p>3）虚拟存储系统的页面是设置得大一些好还是设置得小一些好？</p>
      <ul>
        <li>页面大小要适中
          <ul>
            <li>页面太小的影响
              <ul>
                <li>平均页内剩余空间较小，可节省存储空间</li>
                <li>页表会增大</li>
                <li>不能充分利用空间局部性来提高命中率</li>
              </ul>
            </li>
            <li>页面太大的影响
              <ul>
                <li>可减少页表空间</li>
                <li>平均页内剩余空间较大，会浪费较多存储空间</li>
                <li>页面调入/调出的时间较长</li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
      <h1 id="span-stylecolor-silver常见问题和易混淆知识点"><span style="color: silver;">常见问题和易混淆知识点 </span></h1>
      <ul>
        <li>1.Cache行的大小和命中率之间有什么关系？</li>
      </ul>
      <p>Cache行的长度较大时，能充分利用程序访问的空间局部性，使一个较大的局部空间被一起调到Cache中，因而可以增加命中机会。但是，行长也不能太大，主要原因有两个：</p>
      <p>1）行长大使失效损失变大。也就是说，若未命中，则需花更多时间从主存读块。</p>
      <p>2）行长太大，Cache项数变少，因而命中的可能性变小。</p>
      <p>Cache行的长度较小时，命中率会很低，但好处是存取块的代价较小。</p>
      <ul>
        <li>2.发生取指令Cache缺失的处理过程是什么？</li>
      </ul>
      <p>1）程序计数器恢复当前指令的值。</p>
      <p>2）对主存进行读的操作。</p>
      <p>3）将读入的指令写入Cache中，更改有效位和标记位。</p>
      <p>4）重新执行当前指令。</p>
      <ul>
        <li>3.Cache总容量与映射方式有何种关系？</li>
      </ul>
      <p>Cache总容量 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML">
              <semantics>
                <mrow>
                  <mo>=</mo>
                </mrow>
                <annotation encoding="application/x-tex">=</annotation>
              </semantics>
            </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                style="height:0.3669em;"></span><span class="mrel">=</span></span></span></span>
        [每个Cache行标记项的容量（有效位、脏位、LRU替换位、标记位）+Cache行长xCache总行数。其中，有效位和标记位是所有Cache所必需的；脏位只在Cache采用回写法时才需要设置；LRU替换位只在Cache采用LRU替换算法时才需要设置。
      </p>
      <p>有效位：占1位，用于说明Cache行中的数据是否有效。脏位（修改位）：占1位，回写法才需要设置，用以说明Cache行中的数据是否被修改过。LRU替换位：位数为 <span class="katex"><span
            class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML">
              <semantics>
                <mrow>
                  <msub>
                    <mrow>
                      <mi>log</mi>
                      <mo>⁡</mo>
                    </mrow>
                    <mn>2</mn>
                  </msub>
                  <mo stretchy="false">(</mo>
                </mrow>
                <annotation encoding="application/x-tex">\log_{2}(</annotation>
              </semantics>
            </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mop">lo<span
                    style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span
                    class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span
                          style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut"
                            style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span
                              class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span
                        class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist"
                        style="height:0.2441em;"><span></span></span></span></span></span></span><span
                class="mopen">(</span></span></span></span> 组内块数），用于LRU替换算法中的访问计数。</p>
      <p>标记位Tag：主存地址结构中的标记字段，其位数取决于所用的映射方式，用于匹配Cache行对应主存中的哪个块。</p>
      <p>Cache容量与映射方式的具体关系如图3.30所示。</p>
      <p><img
          src="https://cdn-mineru.openxlab.org.cn/model-mineru/prod/77d74c7bc0a8fc408aa68057edb2cbdd1c424abbf65fd57e9f4d982659723d0b.jpg"
          alt=""></p>
    </span>
  </div>
  <div class="md-sidebar-toc">
    <div class="md-toc">
      <details style="padding:0;;padding-left:0px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#span-stylecolor-gray外spanspan-stylecolor-silver部m" class="md-toc-link">
            <p><span style="color: gray;">外</span><span style="color: silver;">部M</span></p>
          </a>
        </summary>
        <div>
          <details style="padding:0;;padding-left:24px;" open="">
            <summary class="md-toc-link-wrapper">
              <a href="#span-stylecolor-lightskyblue磁盘span-span-stylecolor-silverm" class="md-toc-link">
                <p><span style="color: LightSkyBlue;">磁盘</span> <span style="color: silver;">M</span></p>
              </a>
            </summary>
            <div>
              <details style="padding:0;;padding-left:24px;" open="">
                <summary class="md-toc-link-wrapper">
                  <a href="#span-stylecolor-goldenrod组成" class="md-toc-link">
                    <p><span style="color: Goldenrod;">组成</span></p>
                  </a>
                </summary>
                <div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silver组件" class="md-toc-link">
                      <p><span style="color: silver;">组件</span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silver磁盘span-stylecolor-greenyellow驱动span器" class="md-toc-link">
                      <p><span style="color: silver;">磁盘<span style="color: GreenYellow;">驱动</span>器</span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silver磁盘span-stylecolor-gold控制span器" class="md-toc-link">
                      <p><span style="color: silver;">磁盘<span style="color: Gold;">控制</span>器</span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-gold存储span-span-stylecolor-silver区域" class="md-toc-link">
                      <p><span style="color: Gold;">存储</span> <span style="color: silver;">区域</span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-limegreen参数" class="md-toc-link">
                      <p><span style="color: LimeGreen;">参数</span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-lightskyblue物理span-span-stylecolor-gold特性" class="md-toc-link">
                      <p><span style="color: LightSkyBlue;">物理</span> <span style="color: Gold;">特性</span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silver磁盘-span-stylecolor-gold高速span缓存" class="md-toc-link">
                      <p><span style="color: silver;">磁盘 <span style="color: Gold;">高速</span>缓存</span></p>

                    </a>
                  </div>
                </div>
              </details>
              <details style="padding:0;;padding-left:24px;" open="">
                <summary class="md-toc-link-wrapper">
                  <a href="#span-stylecolor-gold原理" class="md-toc-link">
                    <p><span style="color: Gold;">原理</span></p>
                  </a>
                </summary>
                <div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silverspan-stylecolor-lightskyblue编码span方法" class="md-toc-link">
                      <p><span style="color: silver;"><span style="color: LightSkyBlue;">编码</span>方法</span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silver磁span-stylecolor-limegreen记录span方式" class="md-toc-link">
                      <p><span style="color: silver;">磁<span style="color: LimeGreen;">记录</span>方式</span></p>

                    </a>
                  </div>
                </div>
              </details>
              <details style="padding:0;;padding-left:24px;" open="">
                <summary class="md-toc-link-wrapper">
                  <a href="#span-stylecolor-gold性能spanspan-stylecolor-limegreen指标" class="md-toc-link">
                    <p><span style="color: Gold;">性能</span><span style="color: LimeGreen;">指标</span></p>
                  </a>
                </summary>
                <div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silver记录span-stylecolor-gray密度" class="md-toc-link">
                      <p><span style="color: silver;">记录<span style="color: gray;">密度</span></span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silver磁盘-span-stylecolor-limegreen容量" class="md-toc-link">
                      <p><span style="color: silver;">磁盘 <span style="color: LimeGreen;">容量</span></span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silver存取span-stylecolor-gray时间" class="md-toc-link">
                      <p><span style="color: silver;">存取<span style="color: gray;">时间</span></span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silverspan-stylecolor-lightskyblue数据span传输span-stylecolor-royalblue速率"
                      class="md-toc-link">
                      <p><span style="color: silver;"><span style="color: LightSkyBlue;">数据</span>传输<span
                            style="color: RoyalBlue;">速率</span></span></p>

                    </a>
                  </div>
                </div>
              </details>
              <details style="padding:0;;padding-left:24px;" open="">
                <summary class="md-toc-link-wrapper">
                  <a href="#span-stylecolor-silver磁盘span-stylecolor-darkred地址" class="md-toc-link">
                    <p><span style="color: silver;">磁盘<span style="color: DarkRed;">地址</span></span></p>
                  </a>
                </summary>
                <div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silver地址-span-stylecolor-limegreen结构" class="md-toc-link">
                      <p><span style="color: silver;">地址 <span style="color: LimeGreen;">结构</span></span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silvereg" class="md-toc-link">
                      <p><span style="color: silver;">eg</span></p>

                    </a>
                  </div>
                </div>
              </details>
              <details style="padding:0;;padding-left:24px;" open="">
                <summary class="md-toc-link-wrapper">
                  <a href="#span-stylecolor-silver工作-span-stylecolor-gold过程" class="md-toc-link">
                    <p><span style="color: silver;">工作 <span style="color: Gold;">过程</span></span></p>
                  </a>
                </summary>
                <div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silverlimit" class="md-toc-link">
                      <p><span style="color: silver;">limit</span></p>

                    </a>
                  </div>
                </div>
              </details>
              <details style="padding:0;;padding-left:24px;" open="">
                <summary class="md-toc-link-wrapper">
                  <a href="#span-stylecolor-silver磁盘span-stylecolor-royalblue阵列span-span-stylecolor-silver--span-stylecolor-greenyellowrspanspan-stylecolor-royalblueaspanspan-stylecolor-grayispand"
                    class="md-toc-link">
                    <p><span style="color: silver;">磁盘<span style="color: RoyalBlue;">阵列</span> <span
                          style="color: silver;">( <span style="color: GreenYellow;">R</span><span
                            style="color: RoyalBlue;">A</span><span style="color: gray;">I</span>D</span></span></p>
                  </a>
                </summary>
                <div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-gold特点span-span-stylecolor-silver" class="md-toc-link">
                      <p><span style="color: Gold;">特点</span> <span style="color: silver;">:</span></p>

                    </a>
                  </div>
                  <details style="padding:0;;padding-left:24px;" open="">
                    <summary class="md-toc-link-wrapper">
                      <a href="#span-stylecolor-gold分级" class="md-toc-link">
                        <p><span style="color: Gold;">分级</span></p>
                      </a>
                    </summary>
                    <div>
                      <div class="md-toc-link-wrapper"
                        style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                        <a href="#span-stylecolor-greenyellow类型" class="md-toc-link">
                          <p><span style="color: GreenYellow;">类型</span></p>

                        </a>
                      </div>
                      <div class="md-toc-link-wrapper"
                        style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                        <a href="#span-stylecolor-silverraidspan-stylecolor-lightskyblue0" class="md-toc-link">
                          <p><span style="color: silver;">RAID<span style="color: LightSkyBlue;">0</span></span></p>

                        </a>
                      </div>
                      <div class="md-toc-link-wrapper"
                        style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                        <a href="#span-stylecolor-silverraidspan-stylecolor-greenyellow1" class="md-toc-link">
                          <p><span style="color: silver;">RAID<span style="color: GreenYellow;">1</span></span></p>

                        </a>
                      </div>
                    </div>
                  </details>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silver优势" class="md-toc-link">
                      <p><span style="color: silver;">优势</span></p>

                    </a>
                  </div>
                </div>
              </details>

            </div>
          </details>
          <details style="padding:0;;padding-left:24px;" open="">
            <summary class="md-toc-link-wrapper">
              <a href="#span-stylecolor-gold固态span-span-stylecolor-silver硬盘" class="md-toc-link">
                <p><span style="color: Gold;">固态</span> <span style="color: silver;">硬盘</span></p>
              </a>
            </summary>
            <div>
              <details style="padding:0;;padding-left:24px;" open="">
                <summary class="md-toc-link-wrapper">
                  <a href="#span-stylecolor-gold特性" class="md-toc-link">
                    <p><span style="color: Gold;">特性</span></p>
                  </a>
                </summary>
                <div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silver组成" class="md-toc-link">
                      <p><span style="color: silver;">组成</span></p>

                    </a>
                  </div>
                  <details style="padding:0;;padding-left:24px;" open="">
                    <summary class="md-toc-link-wrapper">
                      <a href="#span-stylecolor-silver-span-stylecolor-limegreen结构span--特点" class="md-toc-link">
                        <p><span style="color: silver;"> <span style="color: LimeGreen;">结构</span> &amp; 特点</span></p>
                      </a>
                    </summary>
                    <div>
                      <div class="md-toc-link-wrapper"
                        style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                        <a href="#span-stylecolor-silver特点" class="md-toc-link">
                          <p><span style="color: silver;">特点</span></p>

                        </a>
                      </div>
                    </div>
                  </details>

                </div>
              </details>
              <details style="padding:0;;padding-left:24px;" open="">
                <summary class="md-toc-link-wrapper">
                  <a href="#span-stylecolor-silverspan-stylecolor-gray磨损span-span-stylecolor-gold均衡spanwear-leveling"
                    class="md-toc-link">
                    <p><span style="color: silver;"><span style="color: gray;">磨损</span> <span
                          style="color: Gold;">均衡</span>（Wear Leveling）</span></p>
                  </a>
                </summary>
                <div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-gray寿命" class="md-toc-link">
                      <p><span style="color: gray;">寿命</span></p>

                    </a>
                  </div>
                  <details style="padding:0;;padding-left:24px;" open="">
                    <summary class="md-toc-link-wrapper">
                      <a href="#span-stylecolor-silver技术" class="md-toc-link">
                        <p><span style="color: silver;">技术</span></p>
                      </a>
                    </summary>
                    <div>
                      <div class="md-toc-link-wrapper"
                        style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                        <a href="#span-stylecolor-silver-span-stylecolor-limegreen动span态磨损均衡" class="md-toc-link">
                          <p><span style="color: silver;"> <span style="color: LimeGreen;">动</span>态磨损均衡</span></p>

                        </a>
                      </div>
                      <div class="md-toc-link-wrapper"
                        style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                        <a href="#span-stylecolor-silverspan-stylecolor-lightskyblue静span" class="md-toc-link">
                          <p><span style="color: silver;"><span style="color: LightSkyBlue;">静</span>~</span></p>

                        </a>
                      </div>
                    </div>
                  </details>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silver提升" class="md-toc-link">
                      <p><span style="color: silver;">提升</span></p>

                    </a>
                  </div>
                </div>
              </details>

            </div>
          </details>

        </div>
      </details>
      <details style="padding:0;;padding-left:0px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#span-stylecolor-gold缓冲span-span-stylecolor-silver--span-stylecolor-slatebluecache"
            class="md-toc-link">
            <p><span style="color: Gold;">缓冲</span> <span style="color: silver;">~ (<span
                  style="color: SlateBlue;">cache</span></span></p>
          </a>
        </summary>
        <div>
          <details style="padding:0;;padding-left:24px;" open="">
            <summary class="md-toc-link-wrapper">
              <a href="#span-stylecolor-silver程序访问的-span-stylecolor-gold局部span性原理" class="md-toc-link">
                <p><span style="color: silver;">程序访问的 <span style="color: Gold;">局部</span>性原理</span></p>
              </a>
            </summary>
            <div>
              <details style="padding:0;;padding-left:24px;" open="">
                <summary class="md-toc-link-wrapper">
                  <a href="#span-stylecolor-silver概述" class="md-toc-link">
                    <p><span style="color: silver;">概述</span></p>
                  </a>
                </summary>
                <div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-limegreen时间span-span-stylecolor-silver局部性" class="md-toc-link">
                      <p><span style="color: LimeGreen;">时间</span> <span style="color: silver;">局部性</span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-gray空间span-span-stylecolor-silver" class="md-toc-link">
                      <p><span style="color: gray;">空间</span> <span style="color: silver;">~</span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silver在cache中的-span-stylecolor-gold应用" class="md-toc-link">
                      <p><span style="color: silver;">在cache中的 <span style="color: Gold;">应用</span></span></p>

                    </a>
                  </div>
                </div>
              </details>
              <details style="padding:0;;padding-left:24px;" open="">
                <summary class="md-toc-link-wrapper">
                  <a href="#span-stylecolor-silvereg-1" class="md-toc-link">
                    <p><span style="color: silver;">eg</span></p>
                  </a>
                </summary>
                <div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silverq" class="md-toc-link">
                      <p><span style="color: silver;">q</span></p>

                    </a>
                  </div>
                  <details style="padding:0;;padding-left:24px;" open="">
                    <summary class="md-toc-link-wrapper">
                      <a href="#span-stylecolor-silveranswer" class="md-toc-link">
                        <p><span style="color: silver;">answer</span></p>
                      </a>
                    </summary>
                    <div>
                      <div class="md-toc-link-wrapper"
                        style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                        <a href="#span-stylecolor-lightskyblue数组span-span-stylecolor-silver" class="md-toc-link">
                          <p><span style="color: LightSkyBlue;">数组</span> <span style="color: silver;">:</span></p>

                        </a>
                      </div>
                      <div class="md-toc-link-wrapper"
                        style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                        <a href="#span-stylecolor-greenyellow循环span-span-stylecolor-silver体" class="md-toc-link">
                          <p><span style="color: GreenYellow;">循环</span> <span style="color: silver;">体:</span></p>

                        </a>
                      </div>
                      <div class="md-toc-link-wrapper"
                        style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                        <a href="#span-stylecolor-silversum" class="md-toc-link">
                          <p><span style="color: silver;">sum</span></p>

                        </a>
                      </div>
                    </div>
                  </details>

                </div>
              </details>

            </div>
          </details>
          <details style="padding:0;;padding-left:24px;" open="">
            <summary class="md-toc-link-wrapper">
              <a href="#span-stylecolor-silver工作span-stylecolor-gold原理" class="md-toc-link">
                <p><span style="color: silver;">工作<span style="color: Gold;">原理</span></span></p>
              </a>
            </summary>
            <div>
              <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                <a href="#span-stylecolor-green结构" class="md-toc-link">
                  <p><span style="color: green;">结构</span></p>

                </a>
              </div>
              <details style="padding:0;;padding-left:24px;" open="">
                <summary class="md-toc-link-wrapper">
                  <a href="#span-stylecolor-silverprocess" class="md-toc-link">
                    <p><span style="color: silver;">process</span></p>
                  </a>
                </summary>
                <div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-goldr" class="md-toc-link">
                      <p><span style="color: Gold;">R</span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-limegreenw" class="md-toc-link">
                      <p><span style="color: LimeGreen;">W</span></p>

                    </a>
                  </div>
                </div>
              </details>
              <details style="padding:0;;padding-left:24px;" open="">
                <summary class="md-toc-link-wrapper">
                  <a href="#span-stylecolor-gold性能" class="md-toc-link">
                    <p><span style="color: Gold;">性能</span></p>
                  </a>
                </summary>
                <div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-limegreen命中spanspan-stylecolor-royalblue率span-span-stylecolor-silver计算"
                      class="md-toc-link">
                      <p><span style="color: LimeGreen;">命中</span><span style="color: RoyalBlue;">率</span> <span
                          style="color: silver;">计算</span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silvereg-2" class="md-toc-link">
                      <p><span style="color: silver;">eg</span></p>

                    </a>
                  </div>
                </div>
              </details>
              <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                <a href="#span-stylecolor-silverkey-环节" class="md-toc-link">
                  <p><span style="color: silver;">key 环节</span></p>

                </a>
              </div>
            </div>
          </details>
          <details style="padding:0;;padding-left:24px;" open="">
            <summary class="md-toc-link-wrapper">
              <a href="#span-stylecolor-silverspan-stylecolor-slatebluecachespan和-span-stylecolor-gold主存span-的-span-stylecolor-greenyellow映射span方式"
                class="md-toc-link">
                <p><span style="color: silver;"><span style="color: SlateBlue;">Cache</span>和 <span
                      style="color: Gold;">主存</span> 的 <span style="color: GreenYellow;">映射</span>方式</span></p>
              </a>
            </summary>
            <div>
              <details style="padding:0;;padding-left:24px;" open="">
                <summary class="md-toc-link-wrapper">
                  <a href="#span-stylecolor-gray直接-span-stylecolor-silver" class="md-toc-link">
                    <p><span style="color: gray;">直接 <span style="color: silver;">~</span></span></p>
                  </a>
                </summary>
                <div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silverconcept" class="md-toc-link">
                      <p><span style="color: silver;">concept</span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silver映射-span-stylecolor-greenyellow关系" class="md-toc-link">
                      <p><span style="color: silver;">映射 <span style="color: GreenYellow;">关系</span></span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-darkred地址span-span-stylecolor-silver结构" class="md-toc-link">
                      <p><span style="color: DarkRed;">地址</span> <span style="color: silver;">结构</span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-limegreen访spanspan-stylecolor-gold存" class="md-toc-link">
                      <p><span style="color: LimeGreen;">访</span><span style="color: Gold;">存</span></p>

                    </a>
                  </div>
                </div>
              </details>
              <details style="padding:0;;padding-left:24px;" open="">
                <summary class="md-toc-link-wrapper">
                  <a href="#span-stylecolor-gold全span-span-stylecolor-greenyellow相spanspan-stylecolor-lightskyblue联span-span-stylecolor-silver"
                    class="md-toc-link">
                    <p><span style="color: Gold;">全</span> <span style="color: GreenYellow;">相</span><span
                        style="color: LightSkyBlue;">联</span> <span style="color: silver;">~</span></p>
                  </a>
                </summary>
                <div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silverconcept-1" class="md-toc-link">
                      <p><span style="color: silver;">concept</span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-darkred地址span-span-stylecolor-limegreen结构" class="md-toc-link">
                      <p><span style="color: DarkRed;">地址</span> <span style="color: LimeGreen;">结构</span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-limegreen访spanspan-stylecolor-gold存-1" class="md-toc-link">
                      <p><span style="color: LimeGreen;">访</span><span style="color: Gold;">存</span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-green硬件span-span-stylecolor-gold实现" class="md-toc-link">
                      <p><span style="color: green;">硬件</span> <span style="color: Gold;">实现</span></p>

                    </a>
                  </div>
                </div>
              </details>
              <details style="padding:0;;padding-left:24px;" open="">
                <summary class="md-toc-link-wrapper">
                  <a href="#span-stylecolor-gray组spanspan-stylecolor-greenyellow相spanspan-stylecolor-lightskyblue联-"
                    class="md-toc-link">
                    <p><span style="color: gray;">组</span><span style="color: GreenYellow;">相</span><span
                        style="color: LightSkyBlue;">联 ~</span></p>
                  </a>
                </summary>
                <div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silverconcept-2" class="md-toc-link">
                      <p><span style="color: silver;">concept</span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-limegreen映射span-span-stylecolor-silver关系" class="md-toc-link">
                      <p><span style="color: LimeGreen;">映射</span> <span style="color: silver;">关系</span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-limegreen访spanspan-stylecolor-gold存-2" class="md-toc-link">
                      <p><span style="color: LimeGreen;">访</span><span style="color: Gold;">存</span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-green硬件span-span-stylecolor-silver实现" class="md-toc-link">
                      <p><span style="color: green;">硬件</span> <span style="color: silver;">实现</span></p>

                    </a>
                  </div>
                  <details style="padding:0;;padding-left:24px;" open="">
                    <summary class="md-toc-link-wrapper">
                      <a href="#span-stylecolor-silvereg-3" class="md-toc-link">
                        <p><span style="color: silver;">eg</span></p>
                      </a>
                    </summary>
                    <div>
                      <details style="padding:0;;padding-left:24px;" open="">
                        <summary class="md-toc-link-wrapper">
                          <a href="#span-stylecolor-silverqa" class="md-toc-link">
                            <p><span style="color: silver;">q&amp;a:</span></p>
                          </a>
                        </summary>
                        <div>
                          <div class="md-toc-link-wrapper"
                            style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                            <a href="#span-stylecolor-silver-span-stylecolor-greenyellow标记span阵列结构" class="md-toc-link">
                              <p><span style="color: silver;"> <span style="color: GreenYellow;">标记</span>阵列结构</span>
                              </p>

                            </a>
                          </div>
                          <div class="md-toc-link-wrapper"
                            style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                            <a href="#span-stylecolor-silver存储--span-stylecolor-limegreen容量span计算" class="md-toc-link">
                              <p><span style="color: silver;">存储 <span style="color: LimeGreen;">容量</span>计算</span></p>

                            </a>
                          </div>
                        </div>
                      </details>
                      <div class="md-toc-link-wrapper"
                        style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                        <a href="#span-stylecolor-silver-span-stylecolor-limegreen映射span方式-span-stylecolor-gold比较"
                          class="md-toc-link">
                          <p><span style="color: silver;"> <span style="color: LimeGreen;">映射</span>方式 <span
                                style="color: Gold;">比较</span></span></p>

                        </a>
                      </div>
                    </div>
                  </details>

                </div>
              </details>

            </div>
          </details>
          <details style="padding:0;;padding-left:24px;" open="">
            <summary class="md-toc-link-wrapper">
              <a href="#span-stylecolor-silvercache中span-stylecolor-gold主存span块的-span-stylecolor-limegreen替换span算法"
                class="md-toc-link">
                <p><span style="color: silver;">Cache中<span style="color: Gold;">主存</span>块的 <span
                      style="color: LimeGreen;">替换</span>算法</span></p>
              </a>
            </summary>
            <div>
              <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                <a href="#span-stylecolor-silverconcept-3" class="md-toc-link">
                  <p><span style="color: silver;">concept</span></p>

                </a>
              </div>
              <details style="padding:0;;padding-left:24px;" open="">
                <summary class="md-toc-link-wrapper">
                  <a href="#span-stylecolor-greenyellowtype" class="md-toc-link">
                    <p><span style="color: GreenYellow;">type</span></p>
                  </a>
                </summary>
                <div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silver随机-span-stylecolor-goldrandspan" class="md-toc-link">
                      <p><span style="color: silver;">随机( <span style="color: Gold;">RAND</span>)</span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silver先进先出span-stylecolor-grayfspanispan-stylecolor-grayfspano"
                      class="md-toc-link">
                      <p><span style="color: silver;">先进先出(<span style="color: gray;">F</span>I<span
                            style="color: gray;">F</span>O)</span></p>

                    </a>
                  </div>
                  <details style="padding:0;;padding-left:24px;" open="">
                    <summary class="md-toc-link-wrapper">
                      <a href="#span-stylecolor-silver近期最少使用-span-stylecolor-goldlspanspan-stylecolor-grayrspanspan-stylecolor-greenuspan"
                        class="md-toc-link">
                        <p><span style="color: silver;">近期最少使用( <span style="color: Gold;">L</span><span
                              style="color: gray;">R</span><span style="color: green;">U</span>)</span></p>
                      </a>
                    </summary>
                    <div>
                      <div class="md-toc-link-wrapper"
                        style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                        <a href="#span-stylecolor-silver1--span-stylecolor-greenyellow细节" class="md-toc-link">
                          <p><span style="color: silver;">(1) <span style="color: GreenYellow;">细节</span></span></p>

                        </a>
                      </div>
                      <div class="md-toc-link-wrapper"
                        style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                        <a href="#span-stylecolor-silver2--span-stylecolor-limegreen抖动span现象" class="md-toc-link">
                          <p><span style="color: silver;">(2) <span style="color: LimeGreen;">抖动</span>现象</span></p>

                        </a>
                      </div>
                    </div>
                  </details>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silver最不u经常u使用l-span-stylecolor-goldfspanu算法" class="md-toc-link">
                      <p><span style="color: silver;">最不<u>经常</u>使用(L <span style="color: Gold;">F</span>U)算法</span></p>

                    </a>
                  </div>
                </div>
              </details>

            </div>
          </details>
          <details style="padding:0;;padding-left:24px;" open="">
            <summary class="md-toc-link-wrapper">
              <a href="#span-stylecolor-silvercache的-span-stylecolor-gold一致span性问题" class="md-toc-link">
                <p><span style="color: silver;">Cache的 <span style="color: Gold;">一致</span>性问题</span></p>
              </a>
            </summary>
            <div>
              <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                <a href="#span-stylecolor-silverspan-stylecolor-limegreenwspan操作策略" class="md-toc-link">
                  <p><span style="color: silver;"><span style="color: LimeGreen;">W</span>操作策略</span></p>

                </a>
              </div>
              <details style="padding:0;;padding-left:24px;" open="">
                <summary class="md-toc-link-wrapper">
                  <a href="#span-stylecolor-limegreenwspan-span-stylecolor-silverspan-stylecolor-lightskyblue命中span策略"
                    class="md-toc-link">
                    <p><span style="color: LimeGreen;">W</span> <span style="color: silver;"><span
                          style="color: LightSkyBlue;">命中</span>策略</span></p>
                  </a>
                </summary>
                <div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silver-span-stylecolor-gold全span-span-stylecolor-limegreen写span法直写法-write-through"
                      class="md-toc-link">
                      <p><span style="color: silver;"> <span style="color: Gold;">全</span> <span
                            style="color: LimeGreen;">写</span>法(直写法、Write-through)</span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silverspan-stylecolor-gray回spanspan-stylecolor-limegreen写span法write-back"
                      class="md-toc-link">
                      <p><span style="color: silver;"><span style="color: gray;">回</span><span
                            style="color: LimeGreen;">写</span>法(write-back)</span></p>

                    </a>
                  </div>
                </div>
              </details>
              <details style="padding:0;;padding-left:24px;" open="">
                <summary class="md-toc-link-wrapper">
                  <a href="#span-stylecolor-silver-span-stylecolor-gray不span" class="md-toc-link">
                    <p><span style="color: silver;">~ <span style="color: gray;">不</span>~</span></p>
                  </a>
                </summary>
                <div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silver-span-stylecolor-limegreenwspan-span-stylecolor-gold分配span法"
                      class="md-toc-link">
                      <p><span style="color: silver;"> <span style="color: LimeGreen;">W</span> <span
                            style="color: Gold;">分配</span>法</span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silverspan-stylecolor-gray非span" class="md-toc-link">
                      <p><span style="color: silver;"><span style="color: gray;">非</span>~</span></p>

                    </a>
                  </div>
                </div>
              </details>
              <details style="padding:0;;padding-left:24px;" open="">
                <summary class="md-toc-link-wrapper">
                  <a href="#span-stylecolor-silvercache-span-stylecolor-limegreen结构span设计" class="md-toc-link">
                    <p><span style="color: silver;">Cache <span style="color: LimeGreen;">结构</span>设计</span></p>
                  </a>
                </summary>
                <div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silver-span-stylecolor-greenyellow分离spancache结构" class="md-toc-link">
                      <p><span style="color: silver;"> <span style="color: GreenYellow;">分离</span>Cache结构</span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silver-span-stylecolor-gold多级spancache设计" class="md-toc-link">
                      <p><span style="color: silver;"> <span style="color: Gold;">多级</span>Cache设计</span></p>

                    </a>
                  </div>
                </div>
              </details>

            </div>
          </details>

        </div>
      </details>
      <details style="padding:0;;padding-left:0px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#span-stylecolor-silverspan-stylecolor-slateblue虚拟spanm" class="md-toc-link">
            <p><span style="color: silver;"><span style="color: SlateBlue;">虚拟</span>M</span></p>
          </a>
        </summary>
        <div>
          <details style="padding:0;;padding-left:24px;" open="">
            <summary class="md-toc-link-wrapper">
              <a href="#span-stylecolor-silverconcept-4" class="md-toc-link">
                <p><span style="color: silver;">concept</span></p>
              </a>
            </summary>
            <div>
              <details style="padding:0;;padding-left:24px;" open="">
                <summary class="md-toc-link-wrapper">
                  <a href="#span-stylecolor-darkred地址span-span-stylecolor-silver空间" class="md-toc-link">
                    <p><span style="color: DarkRed;">地址</span> <span style="color: silver;">空间</span></p>
                  </a>
                </summary>
                <div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-slateblue虚拟span-span-stylecolor-silver" class="md-toc-link">
                      <p><span style="color: SlateBlue;">虚拟</span> <span style="color: silver;">~</span></p>

                    </a>
                  </div>
                  <details style="padding:0;;padding-left:24px;" open="">
                    <summary class="md-toc-link-wrapper">
                      <a href="#span-stylecolor-greenyellowtype-1" class="md-toc-link">
                        <p><span style="color: GreenYellow;">type</span></p>
                      </a>
                    </summary>
                    <div>
                      <div class="md-toc-link-wrapper"
                        style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                        <a href="#span-stylecolor-silverspan-stylecolor-slateblue虚span地址-span-stylecolor-gold逻辑span地址"
                          class="md-toc-link">
                          <p><span style="color: silver;"><span style="color: SlateBlue;">虚</span>地址( <span
                                style="color: Gold;">逻辑</span>地址)</span></p>

                        </a>
                      </div>
                      <div class="md-toc-link-wrapper"
                        style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                        <a href="#span-stylecolor-silverspan-stylecolor-green实span地址span-stylecolor-lightskyblue物理span地址"
                          class="md-toc-link">
                          <p><span style="color: silver;"><span style="color: green;">实</span>地址(<span
                                style="color: LightSkyBlue;">物理</span>地址)</span></p>

                        </a>
                      </div>
                    </div>
                  </details>

                </div>
              </details>
              <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                <a href="#span-stylecolor-silvercpu-span-stylecolor-limegreen访问span机制" class="md-toc-link">
                  <p><span style="color: silver;">CPU <span style="color: LimeGreen;">访问</span>机制</span></p>

                </a>
              </div>
              <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                <a href="#span-stylecolor-silver-span-stylecolor-limegreen技术span特点" class="md-toc-link">
                  <p><span style="color: silver;"> <span style="color: LimeGreen;">技术</span>特点</span></p>

                </a>
              </div>
            </div>
          </details>
          <details style="padding:0;;padding-left:24px;" open="">
            <summary class="md-toc-link-wrapper">
              <a href="#span-stylecolor-lightskyblue页spanspan-stylecolor-silver式虚拟存储器" class="md-toc-link">
                <p><span style="color: LightSkyBlue;">页</span><span style="color: silver;">式虚拟存储器</span></p>
              </a>
            </summary>
            <div>
              <details style="padding:0;;padding-left:24px;" open="">
                <summary class="md-toc-link-wrapper">
                  <a href="#span-stylecolor-lightskyblue页spanspan-stylecolor-gray表span" class="md-toc-link">
                    <p><span style="color: LightSkyBlue;">页</span><span style="color: gray;">表</span></p>
                  </a>
                </summary>
                <div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silver组成-1" class="md-toc-link">
                      <p><span style="color: silver;">组成</span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-gold缺spanspan-stylecolor-lightskyblue页span-span-stylecolor-silver处理过程"
                      class="md-toc-link">
                      <p><span style="color: Gold;">缺</span><span style="color: LightSkyBlue;">页</span> <span
                          style="color: silver;">处理过程</span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silver优缺点" class="md-toc-link">
                      <p><span style="color: silver;">优缺点</span></p>

                    </a>
                  </div>
                </div>
              </details>
              <details style="padding:0;;padding-left:24px;" open="">
                <summary class="md-toc-link-wrapper">
                  <a href="#span-stylecolor-darkred地址span-span-stylecolor-limegreen转换span" class="md-toc-link">
                    <p><span style="color: DarkRed;">地址</span> <span style="color: LimeGreen;">转换</span></p>
                  </a>
                </summary>
                <div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silverspan-stylecolor-slateblue虚拟span地址--span-stylecolor-lightskyblue物理span"
                      class="md-toc-link">
                      <p><span style="color: silver;"><span style="color: SlateBlue;">虚拟</span>地址 &amp; <span
                            style="color: LightSkyBlue;">物理</span>~</span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-darkred地址span-span-stylecolor-limegreen转换span-1" class="md-toc-link">
                      <p><span style="color: DarkRed;">地址</span> <span style="color: LimeGreen;">转换</span></p>

                    </a>
                  </div>
                </div>
              </details>
              <details style="padding:0;;padding-left:24px;" open="">
                <summary class="md-toc-link-wrapper">
                  <a href="#span-stylecolor-greenyellow快spanspan-stylecolor-gray表-span-stylecolor-silvertlb"
                    class="md-toc-link">
                    <p><span style="color: GreenYellow;">快</span><span style="color: gray;">表 <span
                          style="color: silver;">（TLB）</span></span></p>
                  </a>
                </summary>
                <div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silver引入" class="md-toc-link">
                      <p><span style="color: silver;">引入</span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-gold原理-1" class="md-toc-link">
                      <p><span style="color: Gold;">原理</span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-gold实现" class="md-toc-link">
                      <p><span style="color: Gold;">实现</span></p>

                    </a>
                  </div>
                </div>
              </details>
              <details style="padding:0;;padding-left:24px;" open="">
                <summary class="md-toc-link-wrapper">
                  <a href="#span-stylecolor-silver-have--span-stylecolor-goldtspanlspan-stylecolor-goldbspan和span-stylecolor-slatebluecachespan的-span-stylecolor-royalblue多级span存储系统"
                    class="md-toc-link">
                    <p><span style="color: silver;"> have <span style="color: Gold;">T</span>L<span
                          style="color: Gold;">B</span>和<span style="color: SlateBlue;">Cache</span>的 <span
                          style="color: RoyalBlue;">多级</span>存储系统</span></p>
                  </a>
                </summary>
                <div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-gold组成span--span-stylecolor-silver--工作原理" class="md-toc-link">
                      <p><span style="color: Gold;">组成</span> <span style="color: silver;"> &amp; 工作原理</span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-greenyellow快span-span-stylecolor-silver表---span-stylecolor-gold慢span表的查找"
                      class="md-toc-link">
                      <p><span style="color: GreenYellow;">快</span> <span style="color: silver;">表 &amp; <span
                            style="color: Gold;">慢</span>表的查找</span></p>

                    </a>
                  </div>
                  <details style="padding:0;;padding-left:24px;" open="">
                    <summary class="md-toc-link-wrapper">
                      <a href="#span-stylecolor-limegreen访问span-span-stylecolor-silver过程" class="md-toc-link">
                        <p><span style="color: LimeGreen;">访问</span> <span style="color: silver;">过程</span></p>
                      </a>
                    </summary>
                    <div>
                      <div class="md-toc-link-wrapper"
                        style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                        <a href="#span-stylecolor-limegreen缺失span-span-stylecolor-silvertype" class="md-toc-link">
                          <p><span style="color: LimeGreen;">缺失</span> <span style="color: silver;">type</span></p>

                        </a>
                      </div>
                      <div class="md-toc-link-wrapper"
                        style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                        <a href="#span-stylecolor-silver-span-stylecolor-gold组合" class="md-toc-link">
                          <p><span style="color: silver;">.. <span style="color: Gold;">组合</span></span></p>

                        </a>
                      </div>
                      <div class="md-toc-link-wrapper"
                        style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                        <a href="#span-stylecolor-silverdifferent组合-span-stylecolor-gold处理" class="md-toc-link">
                          <p><span style="color: silver;">different组合' <span style="color: Gold;">处理</span></span></p>

                        </a>
                      </div>
                    </div>
                  </details>

                </div>
              </details>

            </div>
          </details>
          <details style="padding:0;;padding-left:24px;" open="">
            <summary class="md-toc-link-wrapper">
              <a href="#span-stylecolor-silverspan-stylecolor-gray段span式-" class="md-toc-link">
                <p><span style="color: silver;"><span style="color: gray;">段</span>式 ~</span></p>
              </a>
            </summary>
            <div>
              <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                <a href="#span-stylecolor-silver划分---span-stylecolor-limegreen结构" class="md-toc-link">
                  <p><span style="color: silver;">划分 &amp; <span style="color: LimeGreen;">结构</span></span></p>

                </a>
              </div>
              <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                <a href="#span-stylecolor-darkred地址spanspan-stylecolor-silver-span-stylecolor-limegreen变换span机制"
                  class="md-toc-link">
                  <p><span style="color: DarkRed;">地址</span><span style="color: silver;"> <span
                        style="color: LimeGreen;">变换</span>机制</span></p>

                </a>
              </div>
              <details style="padding:0;;padding-left:24px;" open="">
                <summary class="md-toc-link-wrapper">
                  <a href="#span-stylecolor-gold特点" class="md-toc-link">
                    <p><span style="color: Gold;">特点</span></p>
                  </a>
                </summary>
                <div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-greenyellow透明spanspan-stylecolor-silver性" class="md-toc-link">
                      <p><span style="color: GreenYellow;">透明</span><span style="color: silver;">性</span></p>

                    </a>
                  </div>
                  <div class="md-toc-link-wrapper"
                    style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                    <a href="#span-stylecolor-silver优缺点-1" class="md-toc-link">
                      <p><span style="color: silver;">优缺点</span></p>

                    </a>
                  </div>
                </div>
              </details>

            </div>
          </details>
          <details style="padding:0;;padding-left:24px;" open="">
            <summary class="md-toc-link-wrapper">
              <a href="#span-stylecolor-silverspan-stylecolor-gray段spanspan-stylecolor-lightskyblue页span式"
                class="md-toc-link">
                <p><span style="color: silver;"><span style="color: gray;">段</span><span
                      style="color: LightSkyBlue;">页</span>式~</span></p>
              </a>
            </summary>
            <div>
              <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                <a href="#span-stylecolor-limegreen结构" class="md-toc-link">
                  <p><span style="color: LimeGreen;">结构</span></p>

                </a>
              </div>
              <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                <a href="#span-stylecolor-darkred地址spanspan-stylecolor-limegreen变换-span-stylecolor-silverprocess"
                  class="md-toc-link">
                  <p><span style="color: DarkRed;">地址</span><span style="color: LimeGreen;">变换 <span
                        style="color: silver;">process</span></span></p>

                </a>
              </div>
              <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                <a href="#span-stylecolor-silver优缺点-2" class="md-toc-link">
                  <p><span style="color: silver;">优缺点</span></p>

                </a>
              </div>
            </div>
          </details>
          <details style="padding:0;;padding-left:24px;" open="">
            <summary class="md-toc-link-wrapper">
              <a href="#span-stylecolor-silver-span-stylecolor-gold虚拟span存储器virtual-memory与span-stylecolor-slatebluecachespan的比较"
                class="md-toc-link">
                <p><span style="color: silver;"> <span style="color: Gold;">虚拟</span>存储器Virtual memory与<span
                      style="color: SlateBlue;">Cache</span>的比较</span></p>
              </a>
            </summary>
            <div>
              <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                <a href="#span-stylecolor-silversame" class="md-toc-link">
                  <p><span style="color: silver;">same:</span></p>

                </a>
              </div>
              <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
                <a href="#span-stylecolor-silver不同" class="md-toc-link">
                  <p><span style="color: silver;">不同</span></p>

                </a>
              </div>
            </div>
          </details>

        </div>
      </details>
      <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
        <a href="#span-stylecolor-silver本章小结" class="md-toc-link">
          <p><span style="color: silver;">本章小结</span></p>

        </a>
      </div>
      <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
        <a href="#span-stylecolor-silver常见问题和易混淆知识点" class="md-toc-link">
          <p><span style="color: silver;">常见问题和易混淆知识点</span></p>

        </a>
      </div>
    </div>
  </div>
  <a id="sidebar-toc-btn">≡</a>






  <script>

    var sidebarTOCBtn = document.getElementById('sidebar-toc-btn')
    sidebarTOCBtn.addEventListener('click', function (event) {
      event.stopPropagation()
      if (document.body.hasAttribute('html-show-sidebar-toc')) {
        document.body.removeAttribute('html-show-sidebar-toc')
      } else {
        document.body.setAttribute('html-show-sidebar-toc', true)
      }
    })
  </script>


</body>

</html>